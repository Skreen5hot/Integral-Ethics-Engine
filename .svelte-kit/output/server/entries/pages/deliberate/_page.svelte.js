import{V as _,X as j,Y as T,U as W,Z as P,_ as k,W as b,$ as L,a0 as F}from"../../../chunks/index2.js";import{v as q,d as M,s as O}from"../../../chunks/session.js";/* empty css                                                                */import{f as c,e as s}from"../../../chunks/context.js";import"d3";function U(w){var a=String(w??""),e="<!---->";return e+a+"<!---->"}function H(w,a){w.component(e=>{let n,t=c(a.scenario,()=>({description:"",domain:"",context:{}}),!0),g=c(a.onSubmit,null),v=c(a.disabled,!1);const m=[{value:"",label:"Auto-detect domain"},{value:"healthcare",label:"Healthcare"},{value:"spiritual",label:"Spiritual / Religious"},{value:"education",label:"Education"},{value:"vocational",label:"Vocational / Career"},{value:"environmental",label:"Environmental"},{value:"interpersonal",label:"Interpersonal"},{value:"intellectual",label:"Intellectual / Research"},{value:"general",label:"General"}];function h(){const d=q(t);return d.valid||d.errors,d.valid}t.description&&h(),n=[],e.push(`<form class="scenario-input svelte-117zjhm"><div class="form-group svelte-117zjhm"><label for="scenario-description" class="svelte-117zjhm">Scenario Description <span class="required svelte-117zjhm">*</span></label> <p class="help-text svelte-117zjhm">Describe the ethical dilemma or decision in detail (minimum 10 characters)</p> <textarea id="scenario-description" placeholder="Example: A patient is on life support with no chance of recovery. The family must decide whether to continue treatment or withdraw support..." rows="6"${_("disabled",v,!0)} required${j("svelte-117zjhm",void 0,{error:n.length>0})}>`);const l=s(t.description);if(l&&e.push(`${l}`),e.push("</textarea> "),n.length>0){e.push("<!--[-->"),e.push('<div class="error-messages svelte-117zjhm"><!--[-->');const d=T(n);for(let u=0,o=d.length;u<o;u++){let f=d[u];e.push(`<p class="error-message svelte-117zjhm">‚ö†Ô∏è ${s(f)}</p>`)}e.push("<!--]--></div>")}else e.push("<!--[!-->");e.push('<!--]--></div> <div class="form-group svelte-117zjhm"><label for="scenario-domain" class="svelte-117zjhm">Domain</label> <p class="help-text svelte-117zjhm">Specify the domain or leave blank for automatic detection</p> '),e.select({id:"scenario-domain",value:t.domain,disabled:v,class:""},d=>{d.push("<!--[-->");const u=T(m);for(let o=0,f=u.length;o<f;o++){let y=u[o];d.option({value:y.value},z=>{z.push(`${s(y.label)}`)})}d.push("<!--]-->")},"svelte-117zjhm"),e.push('</div> <details class="context-section svelte-117zjhm"><summary class="svelte-117zjhm">Additional Context (Optional)</summary> <div class="context-fields svelte-117zjhm"><p class="help-text svelte-117zjhm">Add any additional context that might be relevant to the deliberation</p> <p style="color: var(--color-text-muted); font-style: italic;">Context fields coming soon</p></div></details> <div class="form-actions svelte-117zjhm"><!--[-->'),W(e,a,"actions",{},()=>{e.push(`<button type="submit" class="button"${_("disabled",v||n.length>0,!0)}>`),v?(e.push("<!--[-->"),e.push("Processing...")):(e.push("<!--[!-->"),e.push("Begin Deliberation")),e.push("<!--]--></button>")}),e.push("<!--]--></div> "),t.description?(e.push("<!--[-->"),e.push(`<div class="character-count svelte-117zjhm">${s(t.description.length)} characters `),t.description.length<10?(e.push("<!--[-->"),e.push('<span style="color: var(--color-error);">(minimum 10)</span>')):(e.push("<!--[!-->"),t.description.length>4900?(e.push("<!--[-->"),e.push('<span style="color: var(--color-warning);">(approaching limit of 5000)</span>')):e.push("<!--[!-->"),e.push("<!--]-->")),e.push("<!--]--></div>")):e.push("<!--[!-->"),e.push("<!--]--></form>"),P(a,{scenario:t,onSubmit:g,disabled:v})})}function R(w,a){w.component(e=>{let n,t,g,v=c(a.worldview,""),m=c(a.judgment,"uncertain"),h=c(a.confidence,.5),l=c(a.reasoning,""),d=c(a.values,()=>[],!0),u=c(a.weight,.5),o=c(a.cluster,""),f=c(a.expanded,!1);const y={"Material-Empirical":"#10b981","Process-Individual":"#3b82f6","Depth-Spiritual":"#8b5cf6"},z={permissible:"#4f46e5",impermissible:"#d97706",uncertain:"#6b7280"},i={permissible:"Affirming",impermissible:"Concerning",uncertain:"Uncertain"};if(n=1-h,t=n>.4,g=1-n*.3,e.push(`<div${j("worldview-card svelte-1xe2ken",void 0,{expanded:f})}${k(`border-left-color: ${b(y[o]||"#6b7280")}; opacity: ${b(g)};`)}><div class="card-header svelte-1xe2ken" role="button" tabindex="0"><div class="header-left svelte-1xe2ken"><h4 class="svelte-1xe2ken">${s(v)}</h4> `),o?(e.push("<!--[-->"),e.push(`<span class="cluster-badge svelte-1xe2ken"${k(`background: ${b(y[o])};`)}>${s(o)}</span>`)):e.push("<!--[!-->"),e.push(`<!--]--></div> <div class="header-right"><button class="expand-toggle svelte-1xe2ken" aria-label="Toggle details">${s(f?"‚ñº":"‚ñ∂")}</button></div></div> <div class="card-summary svelte-1xe2ken"><div class="summary-item svelte-1xe2ken"><span class="label svelte-1xe2ken">This perspective:</span> <span${j("judgment-badge svelte-1xe2ken",void 0,{uncertain:t})}${k(`background: ${b(z[m])}; opacity: ${b(g)};`)}>${s(i[m])}</span></div> <div class="summary-item svelte-1xe2ken"><span class="label svelte-1xe2ken">Certainty:</span> <div class="confidence-bar-container svelte-1xe2ken"><div class="confidence-bar svelte-1xe2ken"${k(`width: ${b(h*100)}%; background: ${b(z[m])};`)}></div> <span class="confidence-text svelte-1xe2ken">`),t?(e.push("<!--[-->"),e.push(`<span style="color: var(--color-warning);">Significant uncertainty (${s((h*100).toFixed(0))}%)</span>`)):(e.push("<!--[!-->"),e.push(`${s((h*100).toFixed(0))}%`)),e.push(`<!--]--></span></div></div> <div class="summary-item svelte-1xe2ken"><span class="label svelte-1xe2ken">Moral Salience:</span> <span class="weight-text svelte-1xe2ken">${s((u*100).toFixed(0))}% in this domain</span></div></div> `),f){if(e.push("<!--[-->"),e.push(`<div class="card-details svelte-1xe2ken"><div class="reasoning-section svelte-1xe2ken"><h5 class="svelte-1xe2ken">Reasoning</h5> <p class="reasoning-text svelte-1xe2ken">${s(l)}</p></div> `),d&&d.length>0){e.push("<!--[-->"),e.push('<div class="values-section svelte-1xe2ken"><h5 class="svelte-1xe2ken">Values Emphasized</h5> <div class="values-list svelte-1xe2ken"><!--[-->');const p=T(d);for(let x=0,D=p.length;x<D;x++){let C=p[x];e.push(`<span class="value-tag svelte-1xe2ken">${s(C.replace(/_/g," "))}</span>`)}e.push("<!--]--></div></div>")}else e.push("<!--[!-->");e.push("<!--]--> "),t?(e.push("<!--[-->"),e.push(`<div class="uncertainty-notice svelte-1xe2ken"><p class="svelte-1xe2ken">‚ö†Ô∏è <strong>Epistemic Notice:</strong> There is significant uncertainty regarding this perspective's evaluation. `),n>.6?(e.push("<!--[-->"),e.push("This may indicate limited grounding data for this worldview in this context.")):e.push("<!--[!-->"),e.push("<!--]--></p></div>")):e.push("<!--[!-->"),e.push("<!--]--></div>")}else e.push("<!--[!-->");e.push("<!--]--></div>"),P(a,{worldview:v,judgment:m,confidence:h,reasoning:l,values:d,weight:u,cluster:o,expanded:f})})}function J(w,a){w.component(e=>{let n=c(a.worldviews,()=>[],!0),t=c(a.conflicts,()=>[],!0),g=c(a.width,600),v=c(a.height,600),m=c(a.isContested,!1),h=c(a.winningJudgment,null),l=c(a.secondPlace,null),d=c(a.margin,null),u=c(a.marginPercent,null);const o={permissible:"#4f46e5",impermissible:"#d97706",uncertain:"#6b7280"};e.push(`<div class="conflict-map-container svelte-ov15a8"><div class="agent-status svelte-ov15a8"><strong class="svelte-ov15a8">Model Output:</strong> Multi-perspectival Analysis. <span style="font-style: italic;">This system bears no moral cost for this evaluation. Action requires human agency.</span></div> <svg class="conflict-map-svg svelte-ov15a8"></svg> <div class="legend svelte-ov15a8"><div class="legend-title svelte-ov15a8">Visual Encoding</div> <div class="legend-items svelte-ov15a8"><div class="legend-item svelte-ov15a8"><div class="legend-swatch svelte-ov15a8"${k(`background: linear-gradient(to right, transparent, ${b(o.permissible)});`)}></div> <span>Radial Distance = Moral Salience</span></div> <div class="legend-item svelte-ov15a8"><div class="legend-swatch svelte-ov15a8"${k(`background: ${b(o.permissible)};`)}></div> <span>Indigo = Affirming</span></div> <div class="legend-item svelte-ov15a8"><div class="legend-swatch svelte-ov15a8"${k(`background: ${b(o.impermissible)};`)}></div> <span>Ochre = Concerning</span></div> <div class="legend-item svelte-ov15a8"><div class="legend-swatch svelte-ov15a8"${k(`background: ${b(o.uncertain)};`)}></div> <span>Gray = Uncertain</span></div> <div class="legend-item svelte-ov15a8"><div class="legend-swatch dashed svelte-ov15a8"></div> <span>Dashed = High Uncertainty</span></div> <div class="legend-item svelte-ov15a8"><div class="legend-swatch svelte-ov15a8" style="background: #ef4444; opacity: 0.6;"></div> <span>Red Lines = Conflicts</span></div> `),m?(e.push("<!--[-->"),e.push('<div class="legend-item contested-indicator svelte-ov15a8"><div class="legend-swatch svelte-ov15a8" style="background: #fb923c; border: 3px solid #fb923c;"></div> <span>Orange Stroke = Winner (Contested)</span></div> <div class="legend-item contested-indicator svelte-ov15a8"><div class="legend-swatch svelte-ov15a8" style="background: #fbbf24; border: 2px solid #fbbf24;"></div> <span>Amber Stroke = Second Place</span></div>')):e.push("<!--[!-->"),e.push("<!--]--></div></div></div>"),P(a,{worldviews:n,conflicts:t,width:g,height:v,isContested:m,winningJudgment:h,secondPlace:l,margin:d,marginPercent:u})})}function N(w,a){w.component(e=>{let n,t=c(a.judgment,"uncertain"),g=c(a.confidence,.5),v=c(a.confidenceLevel,"moderate"),m=c(a.justification,""),h=c(a.supportingWorldviews,()=>[],!0),l=c(a.minorityViews,()=>[],!0),d=c(a.domain,""),u=c(a.conflictsCount,0),o=c(a.isContested,!1),f=c(a.margin,null),y=c(a.marginPercent,null),z=c(a.secondPlace,null),i=c(a.secondPlaceScore,null),p=c(a.agreement,null),x=c(a.quorum,null);const D={permissible:"#4f46e5",impermissible:"#d97706",uncertain:"#6b7280"},C={permissible:"The integrated perspective tends toward affirmation",impermissible:"The integrated perspective identifies significant concerns",uncertain:"The integrated perspective remains uncertain"},V={low:"There is significant uncertainty across worldviews",moderate:"There is moderate agreement among worldviews",high:"There is substantial convergence among worldviews"};function E(I){return I?I.split(`
`).map(r=>(r=r.trim(),r?r.startsWith("# ")?`<h3 class="just-h1">${r.substring(2)}</h3>`:r.startsWith("## ")?`<h4 class="just-h2">${r.substring(3)}</h4>`:r.startsWith("### ")?`<h5 class="just-h3">${r.substring(4)}</h5>`:r.match(/^\*\*.*\*\*:?\s*/)?`<p class="just-bold">${r.replace(/\*\*/g,"<strong>").replace(/<strong>/g,"").replace(/<\/strong>/g,"")}</strong></p>`:r.startsWith("- ")?`<li>${r.substring(2)}</li>`:`<p class="just-p">${r}</p>`:"")).filter(r=>r).join(""):""}if(n=E(m),e.push(`<div class="integrated-judgment-container svelte-1ywh8lz"><div class="judgment-header svelte-1ywh8lz"><h3 class="svelte-1ywh8lz">Integrated Multi-Perspectival Analysis</h3> <p class="header-subtitle svelte-1ywh8lz">Synthesis across ${s(h.length+l.length)} worldview perspectives `),d?(e.push("<!--[-->"),e.push(`in the <strong>${s(d)}</strong> domain`)):e.push("<!--[!-->"),e.push(`<!--]--></p></div> <div class="judgment-primary svelte-1ywh8lz"${k(`border-left-color: ${b(D[t])};`)}><div class="judgment-label svelte-1ywh8lz">${s(C[t])}</div> <div class="confidence-indicator svelte-1ywh8lz"><div class="confidence-bar-container svelte-1ywh8lz"><div class="confidence-bar svelte-1ywh8lz"${k(`width: ${b(g*100)}%; background: ${b(D[t])};`)}></div></div> <p class="confidence-text svelte-1ywh8lz"><strong>Epistemic Status:</strong> ${s(V[v])}
				(${s((g*100).toFixed(0))}% confidence)</p></div> `),o?(e.push("<!--[-->"),e.push(`<div class="contested-notice svelte-1ywh8lz"><div class="contested-header svelte-1ywh8lz"><span class="contested-icon svelte-1ywh8lz">‚ö†Ô∏è</span> <strong>Contested Judgment Detected</strong></div> <p class="svelte-1ywh8lz">This is a <strong>close call</strong>, not a clear consensus. The winning judgment
					(<strong>${s(t)}</strong>) narrowly prevails over the runner-up
					(<strong>${s(z||"alternative")}</strong>) by only <strong>${s(y!==null?Math.round(y*100):"~")}%</strong>.</p> <p class="contested-explanation svelte-1ywh8lz"><em>In ethics, narrow margins signal a <strong>crisis of competing values</strong>,
					not a decisive answer. This judgment requires careful consideration and may vary
					with context.</em></p> `),p!==null&&x!==null?(e.push("<!--[-->"),e.push(`<div class="contested-metadata svelte-1ywh8lz"><span class="metadata-item svelte-1ywh8lz">Agreement: ${s(Math.round(p*100))}%</span> <span class="metadata-item svelte-1ywh8lz">Quorum: ${s(Math.round(x*100))}%</span> <span class="metadata-item svelte-1ywh8lz">Margin: ${s(y!==null?Math.round(y*100):"~")}%</span></div>`)):e.push("<!--[!-->"),e.push("<!--]--></div>")):e.push("<!--[!-->"),e.push("<!--]--> "),u>0&&!o?(e.push("<!--[-->"),e.push(`<div class="tension-notice svelte-1ywh8lz"><p class="svelte-1ywh8lz">‚ö° <strong>Tension Identified:</strong> ${s(u)} ${s(u===1?"conflict":"conflicts")} detected between worldviews.
					See minority views below for dissenting perspectives.</p></div>`)):e.push("<!--[!-->"),e.push(`<!--]--></div> <div class="justification-section svelte-1ywh8lz"><h4 class="svelte-1ywh8lz">Multi-Perspectival Reasoning</h4> <div class="justification-content svelte-1ywh8lz">${U(n)}</div></div> `),h&&h.length>0){e.push("<!--[-->"),e.push(`<div class="supporting-section svelte-1ywh8lz"><h4 class="svelte-1ywh8lz">Aligned Perspectives (${s(h.length)})</h4> <p class="section-description svelte-1ywh8lz">The following worldviews converge on this judgment:</p> <div class="worldview-badges svelte-1ywh8lz"><!--[-->`);const I=T(h);for(let r=0,A=I.length;r<A;r++){let S=I[r];e.push(`<span class="worldview-badge supporting svelte-1ywh8lz"${k(`background: ${b(D[t])};`)}>${s(S)}</span>`)}e.push("<!--]--></div></div>")}else e.push("<!--[!-->");if(e.push("<!--]--> "),l&&l.length>0){e.push("<!--[-->"),e.push(`<div class="minority-section svelte-1ywh8lz"><h4 class="svelte-1ywh8lz">Dissenting Perspectives (${s(l.length)})</h4> <p class="section-description svelte-1ywh8lz"><strong>Epistemic Humility:</strong> These worldviews reached different conclusions.
				Their perspectives are preserved to avoid premature consensus.</p> <div class="minority-views-list svelte-1ywh8lz"><!--[-->`);const I=T(l);for(let r=0,A=I.length;r<A;r++){let S=I[r];e.push(`<div class="minority-view-card svelte-1ywh8lz"><div class="minority-header svelte-1ywh8lz"><strong>${s(S.worldview)}</strong> <span class="minority-judgment-badge svelte-1ywh8lz">${s(S.judgment)}</span></div> `),S.reasoning?(e.push("<!--[-->"),e.push(`<p class="minority-reasoning svelte-1ywh8lz">"${s(S.reasoning)}"</p>`)):e.push("<!--[!-->"),e.push("<!--]--></div>")}e.push("<!--]--></div></div>")}else e.push("<!--[!-->");e.push(`<!--]--> <div class="epistemic-notice svelte-1ywh8lz"><p class="svelte-1ywh8lz"><strong>Note:</strong> This analysis illuminates the structural complexity of the choice
			but does not prescribe action. The final decision remains with the moral agent who bears
			the existential responsibility for this choice.</p></div></div>`),P(a,{judgment:t,confidence:g,confidenceLevel:v,justification:m,supportingWorldviews:h,minorityViews:l,domain:d,conflictsCount:u,isContested:o,margin:f,marginPercent:y,secondPlace:z,secondPlaceScore:i,agreement:p,quorum:x})})}function B(w,a){w.component(e=>{let n,t=c(a.show,!1);const g={healthcare:[{title:"End-of-Life Care Decision",description:"A 78-year-old patient with terminal cancer is on life support with no chance of recovery. The family must decide whether to continue aggressive treatment or transition to comfort care. The patient left no advance directive, but had previously mentioned preferring quality of life over prolonged suffering.",tags:["end-of-life","family decision","terminal illness"]},{title:"Experimental Treatment Access",description:"A pharmaceutical company offers a patient access to an experimental drug that shows promise but has not completed clinical trials. The treatment could extend life by 6-12 months but carries unknown risks. Insurance will not cover the $200,000 cost.",tags:["experimental","cost","risk-benefit"]},{title:"Organ Donation Priority",description:"Two patients need a liver transplant. One is a 45-year-old parent of three who developed liver disease through no fault of their own. The other is a 28-year-old with self-inflicted damage from alcohol abuse but has been sober for 2 years. Only one liver is available.",tags:["allocation","fairness","desert"]}],spiritual:[{title:"Leaving Faith Community",description:"After 30 years in a conservative religious community, I'm questioning core doctrines and considering leaving. This would mean losing my entire social network and possibly estrangement from family. However, staying feels intellectually dishonest and emotionally suffocating.",tags:["faith","community","authenticity"]},{title:"Interfaith Marriage",description:"I'm in love with someone from a different religious tradition. Both families expect us to convert to their faith. We're considering creating our own spiritual practice that honors both traditions, but this may alienate both families.",tags:["marriage","tradition","family"]},{title:"Religious Practice vs Career",description:"My career requires working on my faith's holy day. The job is a once-in-a-lifetime opportunity that could support my family for years. My religious community views working on this day as a serious violation of sacred obligations.",tags:["work","observance","obligation"]}],education:[{title:"Academic Dishonesty Dilemma",description:"I discovered that several students in my class are using AI to write their essays. I'm struggling to keep up while doing my own work. Reporting them might make me a social outcast, but not reporting feels unfair to honest students.",tags:["cheating","fairness","social pressure"]},{title:"Competitive vs Collaborative Learning",description:"Our school is switching from a competitive grading system (curve-based) to a collaborative learning model where students are evaluated on group projects and peer teaching. Some high-achieving students are protesting, fearing it will hurt their college admissions.",tags:["grading","competition","cooperation"]}],vocational:[{title:"High-Paying Unethical Work",description:"I've been offered a $300,000/year position at a company whose primary client is developing weapons systems. The money would eliminate my family's debt and secure our future, but the work conflicts with my values around peace and non-violence.",tags:["money","values","weapons"]},{title:"Work-Life Balance Crisis",description:"My employer expects 60-80 hour work weeks. I'm missing my children's milestones and my marriage is suffering. However, I'm the sole income earner, and stepping back could mean losing the promotion I've worked toward for five years.",tags:["family","career","time"]},{title:"Whistleblowing Decision",description:"I've discovered my company is falsifying safety reports to avoid recalls. Reporting this could save lives but will certainly cost me my job and make me unemployable in my industry. I have a family depending on my income.",tags:["safety","employment","public good"]}],environmental:[{title:"Wilderness vs Economic Development",description:"Our town has an opportunity to approve a lithium mining operation that would create 500 jobs and fund schools for a decade. However, it would destroy 50,000 acres of pristine wilderness and threaten several endangered species. The region has high unemployment.",tags:["jobs","conservation","community"]},{title:"Personal Carbon Footprint",description:"My dream job requires flying internationally twice a month. I'm deeply concerned about climate change and have been a climate activist. Taking this job would increase my carbon footprint tenfold, but I could use the platform to advocate for environmental policies.",tags:["climate","hypocrisy","advocacy"]}],interpersonal:[{title:"Truth vs Kindness",description:`My best friend is about to marry someone I believe is manipulative and emotionally abusive. I've seen red flags that my friend dismisses as "misunderstandings." Should I speak up and risk ending our friendship, or stay silent and potentially watch them suffer?`,tags:["friendship","honesty","protection"]},{title:"Family Duty vs Independence",description:"My parents expect me to live with them and care for them as they age, as is traditional in our culture. However, I've received a fellowship opportunity across the country that could define my career. Declining feels like abandoning family duty; accepting feels selfish.",tags:["family","culture","career"]}],intellectual:[{title:"Controversial Research Publication",description:"I have data suggesting a controversial conclusion that contradicts mainstream scientific consensus and could be misused by political groups. Publishing could advance knowledge but might cause social harm. Not publishing violates scientific integrity.",tags:["research","politics","integrity"]},{title:"Authorship Dispute",description:"My advisor is listed as first author on a paper despite me doing 90% of the work. This is standard in my field but feels unjust. Challenging this could damage my career prospects and violate academic hierarchy norms.",tags:["credit","power","norms"]}],general:[{title:"Found Wallet Dilemma",description:"I found a wallet with $500 cash and no ID. There's a gym membership card but the gym is closed for renovation. I could really use the money for rent, but it clearly belongs to someone who might also need it.",tags:["honesty","need","property"]},{title:"White Lie to Protect Feelings",description:"My partner asks if I like their new haircut, which I honestly find unflattering. Telling the truth might hurt their feelings and they can't change it now. Should I be honest or tell a kind lie?",tags:["honesty","kindness","relationships"]}]};let v="healthcare",m=null;if(Object.values(g).flat(),n=g[v]||[],t){e.push("<!--[-->"),e.push(`<div class="modal-backdrop svelte-j3ixxh"><div class="modal-content svelte-j3ixxh"><div class="modal-header svelte-j3ixxh"><h2 class="svelte-j3ixxh">Scenario Templates</h2> <button class="close-button svelte-j3ixxh" aria-label="Close">√ó</button></div> <div class="modal-body svelte-j3ixxh"><div class="domain-tabs svelte-j3ixxh"><button${j("tab svelte-j3ixxh",void 0,{active:v==="healthcare"})}>Healthcare</button> <button${j("tab svelte-j3ixxh",void 0,{active:v==="spiritual"})}>Spiritual</button> <button${j("tab svelte-j3ixxh",void 0,{active:v==="education"})}>Education</button> <button${j("tab svelte-j3ixxh",void 0,{active:v==="vocational"})}>Vocational</button> <button${j("tab svelte-j3ixxh",void 0,{active:v==="environmental"})}>Environmental</button> <button${j("tab svelte-j3ixxh",void 0,{active:v==="interpersonal"})}>Interpersonal</button> <button${j("tab svelte-j3ixxh",void 0,{active:v==="intellectual"})}>Intellectual</button> <button${j("tab svelte-j3ixxh",void 0,{active:v==="general"})}>General</button></div> <div class="template-list svelte-j3ixxh"><!--[-->`);const h=T(n);for(let l=0,d=h.length;l<d;l++){let u=h[l];e.push(`<button${j("template-card svelte-j3ixxh",void 0,{selected:m===u})}><h3 class="svelte-j3ixxh">${s(u.title)}</h3> <p class="template-preview svelte-j3ixxh">${s(u.description.slice(0,150))}...</p> <div class="template-tags svelte-j3ixxh"><!--[-->`);const o=T(u.tags);for(let f=0,y=o.length;f<y;f++){let z=o[f];e.push(`<span class="tag svelte-j3ixxh">${s(z)}</span>`)}e.push("<!--]--></div></button>")}e.push("<!--]--></div> "),e.push("<!--[!-->"),e.push(`<!--]--></div> <div class="modal-footer svelte-j3ixxh"><button class="button button-secondary">Cancel</button> <button class="button"${_("disabled",!m,!0)}>Load Template</button></div></div></div>`)}else e.push("<!--[!-->");e.push("<!--]-->"),P(a,{show:t})})}function G(w,a){w.component(e=>{let n=c(a.semanticAnalysis,null);const t={Care:"#e3f2fd",Dignity:"#f3e5f5",Virtue:"#fff3e0",Community:"#e8f5e9",Transcendence:"#fce4ec"},g={1:"Upheld",0:"Neutral","-1":"Violated"},v={1:"var(--color-success)",0:"var(--color-text-muted)","-1":"var(--color-error)"};function m(l){return(l*100).toFixed(0)+"%"}function h(l){return l?typeof l=="string"?l:typeof l=="object"?l.text||l.lemma||l.word||JSON.stringify(l):String(l):"Unknown"}if(n){if(e.push("<!--[-->"),e.push(`<div class="card semantic-analysis-card svelte-okxp3o"><div class="card-header svelte-okxp3o"><div style="display: flex; align-items: center; gap: var(--spacing-sm);"><span style="font-size: 1.5rem;">üß†</span> <div><h3 style="margin: 0;" class="svelte-okxp3o">Semantic Analysis</h3> <p style="margin: 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">Powered by TagTeam v${s(n.version)} ¬∑ Confidence: ${s(m(n.confidence))}</p></div></div> <button type="button" class="button button-secondary" style="font-size: var(--font-size-sm);">${s("Expand Details")}</button></div> <div class="semantic-section svelte-okxp3o"><h4 class="svelte-okxp3o">Semantic Structure</h4> <div class="semantic-roles svelte-okxp3o"><div class="role-item svelte-okxp3o"><span class="role-label svelte-okxp3o">Agent:</span> <span class="role-value svelte-okxp3o">${s(h(n.agent))}</span></div> <div class="role-item svelte-okxp3o"><span class="role-label svelte-okxp3o">Action:</span> <span class="role-value svelte-okxp3o">${s(h(n.action))}</span></div> <div class="role-item svelte-okxp3o"><span class="role-label svelte-okxp3o">Patient:</span> <span class="role-value svelte-okxp3o">${s(h(n.patient))}</span></div> <div class="role-item svelte-okxp3o"><span class="role-label svelte-okxp3o">Frame:</span> <span class="role-value svelte-okxp3o">${s(n.semanticFrame||"Unknown")}</span></div></div></div> <div class="semantic-section svelte-okxp3o"><h4 class="svelte-okxp3o">Detected Values (${s(n.detectedValues?.length||0)}) <span class="domain-badge svelte-okxp3o"${k(`background: ${b(t[n.dominantDomain]||"#f5f5f5")};`)}>${s(n.dominantDomain||"Unknown")} Domain</span></h4> `),n.detectedValues&&n.detectedValues.length>0){e.push("<!--[-->"),e.push('<div class="values-grid svelte-okxp3o"><!--[-->');const l=T(n.detectedValues);for(let d=0,u=l.length;d<u;d++){let o=l[d];e.push(`<div class="value-card svelte-okxp3o"><div class="value-header svelte-okxp3o"><span class="value-name svelte-okxp3o">${s(o.name)}</span> <span class="polarity-badge svelte-okxp3o"${k(`color: ${b(v[o.polarity]||"var(--color-text-muted)")};`)}>${s(g[o.polarity]||"Unknown")}</span></div> <div class="value-meta svelte-okxp3o"><span class="salience">Salience: ${s(m(o.salience))}</span> `),o.domain?(e.push("<!--[-->"),e.push(`<span class="domain-tag svelte-okxp3o">${s(o.domain)}</span>`)):e.push("<!--[!-->"),e.push("<!--]--></div> "),o.evidence&&o.evidence.length>0?(e.push("<!--[-->"),e.push(`<div class="evidence svelte-okxp3o"><span class="evidence-label svelte-okxp3o">Evidence:</span> <span class="evidence-text svelte-okxp3o">"${s(o.evidence.join('", "'))}"</span></div>`)):e.push("<!--[!-->"),e.push("<!--]--></div>")}e.push("<!--]--></div>")}else e.push("<!--[!-->"),e.push('<p style="color: var(--color-text-muted); font-style: italic;">No values detected above confidence threshold</p>');if(e.push("<!--]--></div> "),n.valueConflicts&&n.valueConflicts.length>0){e.push("<!--[-->"),e.push(`<div class="semantic-section conflict-section svelte-okxp3o"><h4 class="svelte-okxp3o">Value Conflicts Detected (${s(n.valueConflicts.length)}) <span style="font-size: var(--font-size-sm); font-weight: normal; color: var(--color-text-muted);">Conflict Score: ${s((n.conflictScore*100).toFixed(0))}%</span></h4> <div class="conflicts-list svelte-okxp3o"><!--[-->`);const l=T(n.valueConflicts);for(let d=0,u=l.length;d<u;d++){let o=l[d];e.push(`<div class="conflict-item svelte-okxp3o"><span class="conflict-values svelte-okxp3o">${s(o.values?.join(" ‚Üî ")||"Unknown")}</span> <span class="conflict-severity svelte-okxp3o">${s(o.severity||"moderate")}</span></div>`)}e.push("<!--]--></div></div>")}else e.push("<!--[!-->");e.push("<!--]--> "),e.push("<!--[!-->"),e.push("<!--]--></div>")}else e.push("<!--[!-->"),e.push('<div class="card" style="background: var(--color-surface); border: 1px dashed var(--color-border); padding: var(--spacing-md);"><p style="color: var(--color-text-muted); font-size: var(--font-size-sm); margin: 0; text-align: center;">‚ÑπÔ∏è Semantic analysis not available (TagTeam not loaded or disabled)</p></div>');e.push("<!--]-->"),P(a,{semanticAnalysis:n})})}function $(w,a){w.component(e=>{var n;let t,g,v,m,h={description:"",domain:"",context:{}},l=!1,d=null,u=!1;async function o(){d=null;try{l=!0;const i=await M.deliberate(h);await O.saveDeliberation(i),setTimeout(()=>{document.getElementById("results")?.scrollIntoView({behavior:"smooth"})},100)}catch(i){d=i.message}finally{l=!1}}t=L(n??={},"$deliberation",M).currentDeliberation,g=t?.metadata?.conflicts||[],v=t?.worldviews?.map(i=>({worldview:i.worldview,judgment:i.judgment,confidence:i.confidence,weight:i.weight}))||[],m=g.map(i=>({worldviews:i.worldviews||i.perspectives||[],severity:i.severity||"moderate"}));let f=!0,y;function z(i){if(i.push(`<div class="container" style="padding: var(--spacing-2xl) 0;"><header style="margin-bottom: var(--spacing-2xl);"><div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: var(--spacing-md);"><div><h1>Ethical Deliberation</h1> <p style="color: var(--color-text-muted); max-width: 800px;">Describe an ethical scenario to receive multi-perspectival analysis from 12 worldviews.
					The interface illuminates complexity rather than simplifying it.</p></div> <button class="button button-secondary" style="white-space: nowrap;">Browse Templates</button></div></header> <main class="flex-col gap-lg"><section>`),H(i,{onSubmit:o,disabled:l,get scenario(){return h},set scenario(p){h=p,f=!1},children:p=>{p.push(`<div class="flex gap-md"><button type="submit" class="button"${_("disabled",l,!0)}>`),l?(p.push("<!--[-->"),p.push("Deliberating...")):(p.push("<!--[!-->"),p.push("Begin Deliberation")),p.push("<!--]--></button> "),t?(p.push("<!--[-->"),p.push('<button type="button" class="button button-secondary">New Deliberation</button>')):p.push("<!--[!-->"),p.push("<!--]--></div>")},$$slots:{default:!0}}),i.push("<!----> "),d?(i.push("<!--[-->"),i.push(`<div style="margin-top: var(--spacing-md); padding: var(--spacing-md); background: #fee; border: 1px solid var(--color-error); border-radius: var(--radius-md); color: var(--color-error);">‚ö†Ô∏è ${s(d)}</div>`)):i.push("<!--[!-->"),i.push("<!--]--></section> "),l?(i.push("<!--[-->"),i.push('<section class="card" style="text-align: center; padding: var(--spacing-2xl);"><div style="font-size: var(--font-size-lg); color: var(--color-text-muted);">‚è≥ Deliberating across 12 worldviews...</div> <p style="margin-top: var(--spacing-md); color: var(--color-text-muted);">Gathering perspectives, identifying tensions, and resolving value conflicts.<br/> <span style="font-style: italic; font-size: var(--font-size-sm);">This deliberative pacing is intentional‚Äîgravity befits the subject matter.</span></p></section>')):i.push("<!--[!-->"),i.push("<!--]--> "),t&&!l){i.push("<!--[-->"),i.push('<div id="results" class="flex-col gap-lg"><section>'),N(i,{judgment:t.judgment,confidence:t.confidence,confidenceLevel:t.confidenceLevel,justification:t.justification,domain:t.domain,supportingWorldviews:t.supportingWorldviews||[],minorityViews:t.minorityViews||[],worldviewsConsulted:t.metadata?.evaluationsCount||t.worldviews?.length||0,conflictsDetected:t.metadata?.conflictsCount||g.length,isContested:t.isContested||!1,margin:t.margin,marginPercent:t.marginPercent,secondPlace:t.secondPlace,secondPlaceScore:t.secondPlaceScore,agreement:t.agreement,quorum:t.quorum}),i.push("<!----></section> "),t.semanticAnalysis?(i.push("<!--[-->"),i.push("<section>"),G(i,{semanticAnalysis:t.semanticAnalysis}),i.push("<!----></section>")):i.push("<!--[!-->"),i.push("<!--]--> "),v.length>0?(i.push("<!--[-->"),i.push("<section>"),J(i,{worldviews:v,conflicts:m,width:700,height:700,isContested:t.isContested||!1,winningJudgment:t.judgment,secondPlace:t.secondPlace,margin:t.margin,marginPercent:t.marginPercent}),i.push("<!----></section>")):i.push("<!--[!-->"),i.push(`<!--]--> <section class="card"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-md);"><h2 style="margin: 0;" class="svelte-1r9skv0">Individual Worldview Evaluations</h2> <button type="button" class="button button-secondary" style="font-size: var(--font-size-sm);">${s(`View All ${t.worldviews.length} Worldviews`)}</button></div> <p style="color: var(--color-text-muted); font-size: var(--font-size-sm); margin-bottom: var(--spacing-lg);">Each worldview provides a unique lens through which to examine the scenario.
						Differences illuminate the structural geometry of the moral problem.</p> `);{if(i.push("<!--[!-->"),t.minorityViews&&t.minorityViews.length>0){i.push("<!--[-->"),i.push('<div style="margin-bottom: var(--spacing-lg);"><h3 style="font-size: var(--font-size-lg); margin-bottom: var(--spacing-sm);" class="svelte-1r9skv0">Dissenting Perspectives <span style="font-size: var(--font-size-sm); font-weight: normal; color: var(--color-text-muted);">(Highlighted per MDI v2.0 Delta Principle)</span></h3> <div class="flex-col gap-md"><!--[-->');const p=T(t.worldviews.filter(x=>t.minorityViews?.some(D=>D.worldview===x.worldview)));for(let x=0,D=p.length;x<D;x++){let C=p[x];R(i,{worldview:C.worldview,judgment:C.judgment,confidence:C.confidence,weight:C.weight,reasoning:C.reasoning,values:C.values||[],isExpanded:!0})}i.push("<!--]--></div></div>")}else i.push("<!--[!-->");i.push(`<!--]--> <div style="text-align: center; padding: var(--spacing-md); background: var(--color-surface); border-radius: var(--radius-md);"><p style="color: var(--color-text-muted); font-size: var(--font-size-sm);">Click "View All ${s(t.worldviews.length)} Worldviews" above to see the complete multi-perspectival analysis</p></div>`)}i.push(`<!--]--></section> <section class="card" style="background: var(--color-surface); border: 1px solid var(--color-border);"><div style="color: var(--color-text-muted); font-size: var(--font-size-sm);"><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);"><div><strong style="color: var(--color-text);">Deliberation ID:</strong><br/> <code style="font-size: var(--font-size-xs);" class="svelte-1r9skv0">${s(t.id)}</code></div> <div><strong style="color: var(--color-text);">Completed:</strong><br/> ${s(new Date(t.timestamp).toLocaleString())}</div> <div><strong style="color: var(--color-text);">Domain:</strong><br/> ${s(t.domain)}</div> <div><strong style="color: var(--color-text);">Conflicts Identified:</strong><br/> ${s(t.metadata?.conflictsCount||0)}</div></div></div></section></div>`)}else i.push("<!--[!-->");i.push("<!--]--></main> "),B(i,{get show(){return u},set show(p){u=p,f=!1}}),i.push("<!----></div>")}do f=!0,y=e.copy(),z(y);while(!f);e.subsume(y),n&&F(n)})}export{$ as default};
