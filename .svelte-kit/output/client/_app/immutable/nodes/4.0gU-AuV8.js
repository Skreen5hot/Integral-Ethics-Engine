import{f as d,a as l,c as vt,t as bt}from"../chunks/rSK1Klio.js";import"../chunks/DbL4GYPF.js";import{c as Jt,o as Tt}from"../chunks/B5EIaqTz.js";import{z as dt,ak as Se,C as D,v as e,D as U,w as g,al as $t,F as a,A as f,I as yt,G as t,u as o,E as s,B as ct,aj as et,J as lt}from"../chunks/yy-X4gVo.js";import{s as r,e as te}from"../chunks/Gi9er-sy.js";import{i as j}from"../chunks/DmsG_J6d.js";import{e as ue,i as be,s as Ce}from"../chunks/C6g0qCxD.js";import{s as xt}from"../chunks/J10jTi4F.js";import{b as wt,s as ze}from"../chunks/CUzGVDrp.js";import{i as gt}from"../chunks/7Epv3BwO.js";import{s as Lt}from"../chunks/B2QTNQCc.js";import"../chunks/DY8T1-RI.js";import{p as nt}from"../chunks/Bo6tmEsf.js";import{b as Dt}from"../chunks/DI32C8Y0.js";var At=d("<option> </option>"),Mt=d("<option> </option>"),Et=d('<div class="loading-state svelte-13nw1os"><p>Loading history...</p></div>'),Nt=d('<button class="button button-secondary">Clear Filters</button>'),Pt=d('<div class="empty-state svelte-13nw1os"><p>No deliberations found</p> <!></div>'),Ut=d('<span class="sort-indicator svelte-13nw1os"> </span>'),qt=d('<span class="sort-indicator svelte-13nw1os"> </span>'),Bt=d('<span class="sort-indicator svelte-13nw1os"> </span>'),Ot=d('<span class="sort-indicator svelte-13nw1os"> </span>'),Ft=d('<tr class="history-row svelte-13nw1os" tabindex="0" role="button"><td class="timestamp-cell svelte-13nw1os"> </td><td class="scenario-cell svelte-13nw1os"><span class="scenario-preview svelte-13nw1os"> </span></td><td class="svelte-13nw1os"><span class="domain-badge svelte-13nw1os"> </span></td><td class="svelte-13nw1os"><span> </span></td><td class="svelte-13nw1os"><div class="confidence-bar-container svelte-13nw1os"><div class="confidence-bar svelte-13nw1os"></div> <span class="confidence-text svelte-13nw1os"> </span></div></td><td class="conflicts-cell svelte-13nw1os"> </td></tr>'),Rt=d('<div class="pagination svelte-13nw1os"><button class="pagination-button svelte-13nw1os">← Previous</button> <span class="page-indicator svelte-13nw1os"> </span> <button class="pagination-button svelte-13nw1os">Next →</button></div>'),Ht=d('<div class="table-wrapper svelte-13nw1os"><table class="history-table svelte-13nw1os"><thead class="svelte-13nw1os"><tr><th class="sortable svelte-13nw1os">Date <!></th><th class="scenario-column svelte-13nw1os">Scenario</th><th class="sortable svelte-13nw1os">Domain <!></th><th class="sortable svelte-13nw1os">Judgment <!></th><th class="sortable svelte-13nw1os">Confidence <!></th><th class="svelte-13nw1os">Conflicts</th></tr></thead><tbody></tbody></table></div> <!>',1),Gt=d('<div class="history-table-container svelte-13nw1os"><div class="controls-bar svelte-13nw1os"><div class="filters svelte-13nw1os"><select class="svelte-13nw1os"></select> <select class="svelte-13nw1os"></select></div> <div class="stats svelte-13nw1os"> </div></div> <!></div>');function Yt(tt,We){dt(We,!1);const q=U(),_=U(),S=U();let F=nt(We,"history",24,()=>[]),M=nt(We,"loading",8,!1);const J=Jt();let n=U("timestamp"),i=U("desc"),Z=U(""),E=U(""),G=U(1),ye=10;const Ve=[{value:"",label:"All Domains"},{value:"healthcare",label:"Healthcare"},{value:"spiritual",label:"Spiritual"},{value:"education",label:"Education"},{value:"vocational",label:"Vocational"},{value:"environmental",label:"Environmental"},{value:"interpersonal",label:"Interpersonal"},{value:"intellectual",label:"Intellectual"},{value:"general",label:"General"}],Ge=[{value:"",label:"All Judgments"},{value:"permissible",label:"Permissible"},{value:"impermissible",label:"Impermissible"},{value:"uncertain",label:"Uncertain"}];function Ae(v){e(n)===v?D(i,e(i)==="asc"?"desc":"asc"):(D(n,v),D(i,"desc"))}function Ye(v){J("select",v)}function V(v){return new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function ae(v){return v.charAt(0).toUpperCase()+v.slice(1)}Se(()=>(g(F()),e(Z),e(E),e(n),e(i)),()=>{D(q,F().filter(v=>!(e(Z)&&v.domain!==e(Z)||e(E)&&v.judgment!==e(E))).sort((v,p)=>{let m,k;switch(e(n)){case"timestamp":m=new Date(v.timestamp).getTime(),k=new Date(p.timestamp).getTime();break;case"domain":m=v.domain,k=p.domain;break;case"judgment":m=v.judgment,k=p.judgment;break;case"confidence":m=v.confidence,k=p.confidence;break;default:m=new Date(v.timestamp).getTime(),k=new Date(p.timestamp).getTime()}return e(i)==="asc"?m>k?1:m<k?-1:0:m<k?1:m>k?-1:0}))}),Se(()=>e(q),()=>{D(_,Math.ceil(e(q).length/ye))}),Se(()=>(e(Z),e(E)),()=>{(e(Z)||e(E))&&D(G,1)}),Se(()=>(e(q),e(G)),()=>{D(S,e(q).slice((e(G)-1)*ye,e(G)*ye))}),$t(),gt();var Ie=Gt(),xe=a(Ie),Me=a(xe),Je=a(Me);f(()=>{e(Z),yt(()=>{})}),ue(Je,5,()=>Ve,be,(v,p)=>{var m=At(),k=a(m,!0);t(m);var R={};f(()=>{r(k,(e(p),o(()=>e(p).label))),R!==(R=(e(p),o(()=>e(p).value)))&&(m.value=(m.__value=(e(p),o(()=>e(p).value)))??"")}),l(v,m)}),t(Je);var Ue=s(Je,2);f(()=>{e(E),yt(()=>{})}),ue(Ue,5,()=>Ge,be,(v,p)=>{var m=Mt(),k=a(m,!0);t(m);var R={};f(()=>{r(k,(e(p),o(()=>e(p).label))),R!==(R=(e(p),o(()=>e(p).value)))&&(m.value=(m.__value=(e(p),o(()=>e(p).value)))??"")}),l(v,m)}),t(Ue),t(Me);var Ke=s(Me,2),qe=a(Ke);t(Ke),t(xe);var y=s(xe,2);{var z=v=>{var p=Et();l(v,p)},T=v=>{var p=vt(),m=et(p);{var k=H=>{var Y=Pt(),se=s(a(Y),2);{var re=ee=>{var le=Nt();te("click",le,()=>{D(Z,""),D(E,"")}),l(ee,le)};j(se,ee=>{(e(Z)||e(E))&&ee(re)})}t(Y),l(H,Y)},R=H=>{var Y=Ht(),se=et(Y),re=a(se),ee=a(re),le=a(ee),pe=a(le),we=s(a(pe));{var I=$=>{var c=Ut(),L=a(c,!0);t(c),f(()=>r(L,e(i)==="asc"?"▲":"▼")),l($,c)};j(we,$=>{e(n)==="timestamp"&&$(I)})}t(pe);var C=s(pe,2),O=s(a(C));{var me=$=>{var c=qt(),L=a(c,!0);t(c),f(()=>r(L,e(i)==="asc"?"▲":"▼")),l($,c)};j(O,$=>{e(n)==="domain"&&$(me)})}t(C);var B=s(C),ie=s(a(B));{var De=$=>{var c=Bt(),L=a(c,!0);t(c),f(()=>r(L,e(i)==="asc"?"▲":"▼")),l($,c)};j(ie,$=>{e(n)==="judgment"&&$(De)})}t(B);var K=s(B),_e=s(a(K));{var ge=$=>{var c=Ot(),L=a(c,!0);t(c),f(()=>r(L,e(i)==="asc"?"▲":"▼")),l($,c)};j(_e,$=>{e(n)==="confidence"&&$(ge)})}t(K),lt(),t(le),t(ee);var $e=s(ee);ue($e,5,()=>e(S),$=>$.id,($,c)=>{var L=Ft(),ve=a(L),Ne=a(ve,!0);t(ve);var oe=s(ve),Oe=a(oe),Qe=a(Oe);t(Oe),t(oe);var je=s(oe),Pe=a(je),de=a(Pe,!0);t(Pe),t(je);var Q=s(je),X=a(Q),Fe=a(X,!0);t(X),t(Q);var ce=s(Q),he=a(ce),fe=a(he),ne=s(fe,2),Te=a(ne);t(ne),t(he),t(ce);var Le=s(ce),at=a(Le,!0);t(Le),t(L),f((ke,Re,st,Xe)=>{r(Ne,ke),r(Qe,`${Re??""}${e(c),o(()=>e(c).scenario.length>80?"...":"")??""}`),r(de,(e(c),o(()=>e(c).domain))),ze(X,1,`judgment-badge judgment-${e(c),o(()=>e(c).judgment)??""}`,"svelte-13nw1os"),r(Fe,st),Ce(fe,`width: ${e(c),o(()=>e(c).confidence*100)??""}%;`),r(Te,`${Xe??""}%`),r(at,(e(c),o(()=>e(c).conflictsCount||0)))},[()=>(e(c),o(()=>V(e(c).timestamp))),()=>(e(c),o(()=>e(c).scenario.substring(0,80))),()=>(e(c),o(()=>ae(e(c).judgment))),()=>(e(c),o(()=>(e(c).confidence*100).toFixed(0)))]),te("click",L,()=>Ye(e(c))),te("keypress",L,ke=>ke.key==="Enter"&&Ye(e(c))),l($,L)}),t($e),t(re),t(se);var Ee=s(se,2);{var Be=$=>{var c=Rt(),L=a(c),ve=s(L,2),Ne=a(ve);t(ve);var oe=s(ve,2);t(c),f(()=>{L.disabled=e(G)===1,r(Ne,`Page ${e(G)??""} of ${e(_)??""}`),oe.disabled=e(G)===e(_)}),te("click",L,()=>D(G,Math.max(1,e(G)-1))),te("click",oe,()=>D(G,Math.min(e(_),e(G)+1))),l($,c)};j(Ee,$=>{e(_)>1&&$(Be)})}te("click",pe,()=>Ae("timestamp")),te("click",C,()=>Ae("domain")),te("click",B,()=>Ae("judgment")),te("click",K,()=>Ae("confidence")),l(H,Y)};j(m,H=>{e(q),o(()=>e(q).length===0)?H(k):H(R,!1)},!0)}l(v,p)};j(y,v=>{M()?v(z):v(T,!1)})}t(Ie),f(()=>r(qe,`Showing ${e(S),o(()=>e(S).length)??""} of ${e(q),o(()=>e(q).length)??""} deliberations`)),wt(Je,()=>e(Z),v=>D(Z,v)),wt(Ue,()=>e(E),v=>D(E,v)),l(tt,Ie),ct()}var Kt=d('<div class="empty-state svelte-guy4oh"><p>Select two deliberations to compare</p></div>'),Qt=d('<p class="status-convergent svelte-guy4oh">✓ Both deliberations reached the same judgment</p>'),Xt=d('<p class="status-divergent svelte-guy4oh">⚡ Deliberations reached different judgments</p>'),Zt=d("<span> <!></span>"),ea=d('<div class="minority-view-item svelte-guy4oh"><strong> </strong> </div>'),ta=d('<div class="section svelte-guy4oh"><h4 class="svelte-guy4oh"> </h4> <div class="minority-views svelte-guy4oh"></div></div>'),aa=d("<span> <!></span>"),sa=d('<div class="minority-view-item svelte-guy4oh"><strong> </strong> </div>'),ra=d('<div class="section svelte-guy4oh"><h4 class="svelte-guy4oh"> </h4> <div class="minority-views svelte-guy4oh"></div></div>'),ia=d('<span class="insight-badge svelte-guy4oh"> </span>'),oa=d('<div class="insight-card convergence svelte-guy4oh"><h4 class="svelte-guy4oh"> </h4> <p class="svelte-guy4oh">These worldviews agreed across both deliberations:</p> <div class="insight-badges svelte-guy4oh"></div></div>'),na=d('<span class="insight-badge unique-1 svelte-guy4oh"> </span>'),la=d('<span class="insight-badge unique-2 svelte-guy4oh"> </span>'),va=d('<div class="insight-card divergence svelte-guy4oh"><h4 class="svelte-guy4oh">Divergence</h4> <p class="svelte-guy4oh"><strong>Deliberation 1 unique:</strong></p> <div class="insight-badges svelte-guy4oh"></div> <p style="margin-top: var(--spacing-sm);" class="svelte-guy4oh"><strong>Deliberation 2 unique:</strong></p> <div class="insight-badges svelte-guy4oh"></div></div>'),da=d('<p class="svelte-guy4oh">Deliberation 1 had <strong> </strong> conflicts</p>'),ca=d('<p class="svelte-guy4oh">Deliberation 2 had <strong> </strong> conflicts</p>'),ga=d('<p class="svelte-guy4oh">Both deliberations identified the <strong>same number</strong> of conflicts</p>'),ua=d('<div class="comparison-summary svelte-guy4oh"><div><h4 class="svelte-guy4oh">Judgment Agreement</h4> <!></div> <div class="summary-item svelte-guy4oh"><h4 class="svelte-guy4oh">Confidence Difference</h4> <p> </p></div> <div class="summary-item svelte-guy4oh"><h4 class="svelte-guy4oh">Worldview Alignment</h4> <p class="svelte-guy4oh"> </p></div></div> <div class="comparison-grid svelte-guy4oh"><div class="deliberation-column svelte-guy4oh"><div class="column-header svelte-guy4oh"><h3 class="svelte-guy4oh">Deliberation 1</h3> <span class="timestamp svelte-guy4oh"> </span></div> <div class="section svelte-guy4oh"><h4 class="svelte-guy4oh">Scenario</h4> <p class="scenario-preview svelte-guy4oh"> </p> <div class="meta svelte-guy4oh"><span class="domain-badge svelte-guy4oh"> </span></div></div> <div class="section svelte-guy4oh"><h4 class="svelte-guy4oh">Integrated Judgment</h4> <div class="judgment-badge svelte-guy4oh"> </div> <div class="confidence-bar-container svelte-guy4oh"><div class="confidence-bar svelte-guy4oh"></div></div> <p class="confidence-text svelte-guy4oh"> </p></div> <div class="section svelte-guy4oh"><h4 class="svelte-guy4oh"> </h4> <div class="worldview-badges svelte-guy4oh"></div></div> <!> <div class="section svelte-guy4oh"><h4 class="svelte-guy4oh">Tensions Identified</h4> <p class="conflict-count svelte-guy4oh"> </p></div></div> <div class="deliberation-column svelte-guy4oh"><div class="column-header svelte-guy4oh"><h3 class="svelte-guy4oh">Deliberation 2</h3> <span class="timestamp svelte-guy4oh"> </span></div> <div class="section svelte-guy4oh"><h4 class="svelte-guy4oh">Scenario</h4> <p class="scenario-preview svelte-guy4oh"> </p> <div class="meta svelte-guy4oh"><span class="domain-badge svelte-guy4oh"> </span></div></div> <div class="section svelte-guy4oh"><h4 class="svelte-guy4oh">Integrated Judgment</h4> <div class="judgment-badge svelte-guy4oh"> </div> <div class="confidence-bar-container svelte-guy4oh"><div class="confidence-bar svelte-guy4oh"></div></div> <p class="confidence-text svelte-guy4oh"> </p></div> <div class="section svelte-guy4oh"><h4 class="svelte-guy4oh"> </h4> <div class="worldview-badges svelte-guy4oh"></div></div> <!> <div class="section svelte-guy4oh"><h4 class="svelte-guy4oh">Tensions Identified</h4> <p class="conflict-count svelte-guy4oh"> </p></div></div></div> <div class="insights-section svelte-guy4oh"><h3 class="svelte-guy4oh">Comparative Insights</h3> <div class="insights-grid svelte-guy4oh"><!> <!> <div class="insight-card tensions svelte-guy4oh"><h4 class="svelte-guy4oh">Tension Analysis</h4> <!></div></div></div>',1),pa=d('<div class="comparison-container svelte-guy4oh"><div class="comparison-header svelte-guy4oh"><h2 class="svelte-guy4oh">Deliberation Comparison</h2> <p class="subtitle svelte-guy4oh">Side-by-side analysis illuminating differences in multi-perspectival judgments</p></div> <!></div>');function ma(tt,We){dt(We,!1);const q=U(),_=U(),S=U(),F=U(),M=U(),J=U();let n=nt(We,"deliberation1",8,null),i=nt(We,"deliberation2",8,null);const Z={permissible:"#4f46e5",impermissible:"#d97706",uncertain:"#6b7280"};function E(V){return Z[V]||Z.uncertain}function G(V){return new Date(V).toLocaleString()}function ye(V){const ae=V?.scenario?.description||"";return ae.length>120?ae.slice(0,120)+"...":ae}Se(()=>(g(n()),g(i())),()=>{D(q,n()&&i()&&n().judgment===i().judgment)}),Se(()=>(g(n()),g(i())),()=>{D(_,n()&&i()?Math.abs(n().confidence-i().confidence):0)}),Se(()=>(g(n()),g(i())),()=>{D(S,n()&&i()?n().supportingWorldviews?.filter(V=>i().supportingWorldviews?.includes(V))||[]:[])}),Se(()=>(g(n()),g(i())),()=>{D(F,n()&&i()?n().supportingWorldviews?.filter(V=>!i().supportingWorldviews?.includes(V))||[]:[])}),Se(()=>(g(n()),g(i())),()=>{D(M,n()&&i()?i().supportingWorldviews?.filter(V=>!n().supportingWorldviews?.includes(V))||[]:[])}),Se(()=>(g(n()),g(i())),()=>{D(J,n()&&i()?(n().metadata?.conflictsCount||0)-(i().metadata?.conflictsCount||0):0)}),$t(),gt();var Ve=pa(),Ge=s(a(Ve),2);{var Ae=V=>{var ae=Kt();l(V,ae)},Ye=V=>{var ae=ua(),Ie=et(ae),xe=a(Ie);let Me;var Je=s(a(xe),2);{var Ue=h=>{var u=Qt();l(h,u)},Ke=h=>{var u=Xt();l(h,u)};j(Je,h=>{e(q)?h(Ue):h(Ke,!1)})}t(xe);var qe=s(xe,2),y=s(a(qe),2);let z;var T=a(y);t(y),t(qe);var v=s(qe,2),p=s(a(v),2),m=a(p);t(p),t(v),t(Ie);var k=s(Ie,2),R=a(k),H=a(R),Y=s(a(H),2),se=a(Y,!0);t(Y),t(H);var re=s(H,2),ee=s(a(re),2),le=a(ee,!0);t(ee);var pe=s(ee,2),we=a(pe),I=a(we,!0);t(we),t(pe),t(re);var C=s(re,2),O=s(a(C),2),me=a(O,!0);t(O);var B=s(O,2),ie=a(B);t(B);var De=s(B,2),K=a(De);t(De),t(C);var _e=s(C,2),ge=a(_e),$e=a(ge);t(ge);var Ee=s(ge,2);ue(Ee,5,()=>(g(n()),o(()=>n().supportingWorldviews||[])),be,(h,u)=>{var b=Zt();let P;var W=a(b),A=s(W);{var w=x=>{var N=bt("★");l(x,N)};j(A,x=>{e(S),e(u),o(()=>e(S).includes(e(u)))&&x(w)})}t(b),f((x,N)=>{P=ze(b,1,"worldview-badge svelte-guy4oh",null,P,x),Ce(b,`background: ${N??""};`),r(W,`${e(u)??""} `)},[()=>({shared:e(S).includes(e(u))}),()=>(e(S),e(u),g(n()),o(()=>e(S).includes(e(u))?"#10b981":E(n().judgment)))]),l(h,b)}),t(Ee),t(_e);var Be=s(_e,2);{var $=h=>{var u=ta(),b=a(u),P=a(b);t(b);var W=s(b,2);ue(W,5,()=>(g(n()),o(()=>n().minorityViews)),be,(A,w)=>{var x=ea(),N=a(x),He=a(N,!0);t(N);var it=s(N);t(x),f(()=>{r(He,(e(w),o(()=>e(w).worldview))),r(it,`: ${e(w),o(()=>e(w).judgment)??""}`)}),l(A,x)}),t(W),t(u),f(()=>r(P,`Dissenting Views (${g(n()),o(()=>n().minorityViews.length)??""})`)),l(h,u)};j(Be,h=>{g(n()),o(()=>n().minorityViews&&n().minorityViews.length>0)&&h($)})}var c=s(Be,2),L=s(a(c),2),ve=a(L);t(L),t(c),t(R);var Ne=s(R,2),oe=a(Ne),Oe=s(a(oe),2),Qe=a(Oe,!0);t(Oe),t(oe);var je=s(oe,2),Pe=s(a(je),2),de=a(Pe,!0);t(Pe);var Q=s(Pe,2),X=a(Q),Fe=a(X,!0);t(X),t(Q),t(je);var ce=s(je,2),he=s(a(ce),2),fe=a(he,!0);t(he);var ne=s(he,2),Te=a(ne);t(ne);var Le=s(ne,2),at=a(Le);t(Le),t(ce);var ke=s(ce,2),Re=a(ke),st=a(Re);t(Re);var Xe=s(Re,2);ue(Xe,5,()=>(g(i()),o(()=>i().supportingWorldviews||[])),be,(h,u)=>{var b=aa();let P;var W=a(b),A=s(W);{var w=x=>{var N=bt("★");l(x,N)};j(A,x=>{e(S),e(u),o(()=>e(S).includes(e(u)))&&x(w)})}t(b),f((x,N)=>{P=ze(b,1,"worldview-badge svelte-guy4oh",null,P,x),Ce(b,`background: ${N??""};`),r(W,`${e(u)??""} `)},[()=>({shared:e(S).includes(e(u))}),()=>(e(S),e(u),g(i()),o(()=>e(S).includes(e(u))?"#10b981":E(i().judgment)))]),l(h,b)}),t(Xe),t(ke);var Ze=s(ke,2);{var rt=h=>{var u=ra(),b=a(u),P=a(b);t(b);var W=s(b,2);ue(W,5,()=>(g(i()),o(()=>i().minorityViews)),be,(A,w)=>{var x=sa(),N=a(x),He=a(N,!0);t(N);var it=s(N);t(x),f(()=>{r(He,(e(w),o(()=>e(w).worldview))),r(it,`: ${e(w),o(()=>e(w).judgment)??""}`)}),l(A,x)}),t(W),t(u),f(()=>r(P,`Dissenting Views (${g(i()),o(()=>i().minorityViews.length)??""})`)),l(h,u)};j(Ze,h=>{g(i()),o(()=>i().minorityViews&&i().minorityViews.length>0)&&h(rt)})}var ot=s(Ze,2),ut=s(a(ot),2),jt=a(ut);t(ut),t(ot),t(Ne),t(k);var pt=s(k,2),mt=s(a(pt),2),_t=a(mt);{var kt=h=>{var u=oa(),b=a(u),P=a(b);t(b);var W=s(b,4);ue(W,5,()=>e(S),be,(A,w)=>{var x=ia(),N=a(x,!0);t(x),f(()=>r(N,e(w))),l(A,x)}),t(W),t(u),f(()=>r(P,`Convergence (${e(S),o(()=>e(S).length)??""} worldviews)`)),l(h,u)};j(_t,h=>{e(S),o(()=>e(S).length>0)&&h(kt)})}var ht=s(_t,2);{var Ct=h=>{var u=va(),b=s(a(u),4);ue(b,5,()=>e(F),be,(W,A)=>{var w=na(),x=a(w,!0);t(w),f(()=>r(x,e(A))),l(W,w)}),t(b);var P=s(b,4);ue(P,5,()=>e(M),be,(W,A)=>{var w=la(),x=a(w,!0);t(w),f(()=>r(x,e(A))),l(W,w)}),t(P),t(u),l(h,u)};j(ht,h=>{e(F),e(M),o(()=>e(F).length>0||e(M).length>0)&&h(Ct)})}var ft=s(ht,2),St=s(a(ft),2);{var zt=h=>{var u=da(),b=s(a(u)),P=a(b);t(b),lt(),t(u),f(W=>r(P,`${W??""} more`),[()=>(e(J),o(()=>Math.abs(e(J))))]),l(h,u)},Wt=h=>{var u=vt(),b=et(u);{var P=A=>{var w=ca(),x=s(a(w)),N=a(x);t(x),lt(),t(w),f(He=>r(N,`${He??""} more`),[()=>(e(J),o(()=>Math.abs(e(J))))]),l(A,w)},W=A=>{var w=ga();l(A,w)};j(b,A=>{e(J)<0?A(P):A(W,!1)},!0)}l(h,u)};j(St,h=>{e(J)>0?h(zt):h(Wt,!1)})}t(ft),t(mt),t(pt),f((h,u,b,P,W,A,w,x,N,He,it,Vt,It)=>{Me=ze(xe,1,"summary-item svelte-guy4oh",null,Me,{divergent:!e(q)}),z=ze(y,1,"svelte-guy4oh",null,z,{"high-difference":e(_)>.3}),r(T,`${h??""}% difference`),r(m,`${e(S),o(()=>e(S).length)??""} shared,
					${e(F),e(M),o(()=>e(F).length+e(M).length)??""} unique`),Ce(H,`background: ${u??""};`),r(se,b),r(le,P),r(I,(g(n()),o(()=>n().domain))),Ce(O,`background: ${W??""};`),r(me,(g(n()),o(()=>n().judgment))),Ce(ie,`width: ${g(n()),o(()=>n().confidence*100)??""}%; background: ${A??""};`),r(K,`${w??""}% confidence`),r($e,`Supporting Worldviews (${g(n()),o(()=>n().supportingWorldviews?.length||0)??""})`),r(ve,`${g(n()),o(()=>n().metadata?.conflictsCount||0)??""} conflicts`),Ce(oe,`background: ${x??""};`),r(Qe,N),r(de,He),r(Fe,(g(i()),o(()=>i().domain))),Ce(he,`background: ${it??""};`),r(fe,(g(i()),o(()=>i().judgment))),Ce(Te,`width: ${g(i()),o(()=>i().confidence*100)??""}%; background: ${Vt??""};`),r(at,`${It??""}% confidence`),r(st,`Supporting Worldviews (${g(i()),o(()=>i().supportingWorldviews?.length||0)??""})`),r(jt,`${g(i()),o(()=>i().metadata?.conflictsCount||0)??""} conflicts`)},[()=>(e(_),o(()=>(e(_)*100).toFixed(1))),()=>(g(n()),o(()=>E(n().judgment))),()=>(g(n()),o(()=>G(n().timestamp))),()=>(g(n()),o(()=>ye(n()))),()=>(g(n()),o(()=>E(n().judgment))),()=>(g(n()),o(()=>E(n().judgment))),()=>(g(n()),o(()=>(n().confidence*100).toFixed(0))),()=>(g(i()),o(()=>E(i().judgment))),()=>(g(i()),o(()=>G(i().timestamp))),()=>(g(i()),o(()=>ye(i()))),()=>(g(i()),o(()=>E(i().judgment))),()=>(g(i()),o(()=>E(i().judgment))),()=>(g(i()),o(()=>(i().confidence*100).toFixed(0)))]),l(V,ae)};j(Ge,V=>{!n()||!i()?V(Ae):V(Ye,!1)})}t(Ve),l(tt,Ve),ct()}var _a=d('<div style="display: flex; gap: var(--spacing-md);"><button> </button> <button class="button button-secondary">Export All as JSON</button></div>'),ha=d('<div class="card" style="text-align: center; padding: var(--spacing-2xl);"><p style="color: var(--color-text-muted);">Loading history...</p></div>'),fa=d(`<div class="card" style="text-align: center; padding: var(--spacing-2xl);"><h2 style="margin-bottom: var(--spacing-md);" class="svelte-1xl2tfr">No Deliberations Yet</h2> <p style="color: var(--color-text-muted); margin-bottom: var(--spacing-lg);">You haven't performed any ethical deliberations yet.
						Start by describing a scenario on the Deliberate page.</p> <a class="button">Begin Deliberation</a></div>`),ba=d('<span class="badge badge-success svelte-1xl2tfr"> </span>'),ya=d('<div style="margin-bottom: var(--spacing-lg);"><h3 style="font-size: var(--font-size-lg); margin-bottom: var(--spacing-sm);" class="svelte-1xl2tfr"> </h3> <div class="flex gap-sm" style="flex-wrap: wrap;"></div></div>'),xa=d('<p style="color: var(--color-text-muted); font-size: var(--font-size-sm); line-height: var(--line-height-relaxed);"> </p>'),wa=d('<div style="padding: var(--spacing-md); background: var(--color-surface); border-left: 3px solid #d97706; border-radius: var(--radius-md);"><div style="margin-bottom: var(--spacing-xs);"><strong> </strong> <span class="badge badge-warning svelte-1xl2tfr" style="margin-left: var(--spacing-xs);"> </span></div> <!></div>'),Da=d('<div style="margin-bottom: var(--spacing-lg);"><h3 style="font-size: var(--font-size-lg); margin-bottom: var(--spacing-sm);" class="svelte-1xl2tfr"> </h3> <p style="color: var(--color-text-muted); font-size: var(--font-size-sm); margin-bottom: var(--spacing-md);">These worldviews reached different conclusions. Their perspectives are preserved for epistemic humility.</p> <div class="flex-col gap-sm"></div></div>'),$a=d('<section id="detail-view" class="card"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-lg);"><h2 class="svelte-1xl2tfr">Deliberation Details</h2> <button class="button button-secondary">Close</button></div> <div style="margin-bottom: var(--spacing-lg);"><h3 style="font-size: var(--font-size-lg); margin-bottom: var(--spacing-sm);" class="svelte-1xl2tfr">Scenario</h3> <div style="padding: var(--spacing-md); background: var(--color-surface); border-radius: var(--radius-md); border-left: 3px solid var(--color-primary);"><p style="line-height: var(--line-height-relaxed);"> </p></div></div> <div style="margin-bottom: var(--spacing-lg);"><h3 style="font-size: var(--font-size-lg); margin-bottom: var(--spacing-sm);" class="svelte-1xl2tfr">Integrated Judgment</h3> <div style="padding: var(--spacing-lg); background: var(--color-surface); border-radius: var(--radius-md);"><div style="font-size: var(--font-size-2xl); font-weight: var(--font-weight-bold); margin-bottom: var(--spacing-sm);"><span> </span></div> <div style="margin-bottom: var(--spacing-sm);"><strong>Confidence:</strong> </div> <div style="margin-bottom: var(--spacing-sm);"><strong>Domain:</strong> </div> <div><strong>Worldviews Consulted:</strong> </div></div></div> <div style="margin-bottom: var(--spacing-lg);"><h3 style="font-size: var(--font-size-lg); margin-bottom: var(--spacing-sm);" class="svelte-1xl2tfr">Justification</h3> <div style="padding: var(--spacing-md); background: var(--color-surface); border-radius: var(--radius-md);"><p style="line-height: var(--line-height-relaxed); color: var(--color-text);"> </p></div></div> <!> <!> <div style="padding-top: var(--spacing-lg); border-top: 1px solid var(--color-border);"><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md); color: var(--color-text-muted); font-size: var(--font-size-sm);"><div><strong style="color: var(--color-text);">Deliberation ID:</strong><br/> <code style="font-size: var(--font-size-xs);" class="svelte-1xl2tfr"> </code></div> <div><strong style="color: var(--color-text);">Completed:</strong><br/> </div> <div><strong style="color: var(--color-text);">Conflicts:</strong><br/> </div></div></div> <div style="margin-top: var(--spacing-lg); display: flex; gap: var(--spacing-md); flex-wrap: wrap;"><a class="button button-secondary">New Deliberation</a> <button class="button button-secondary" style="background: var(--color-error); color: white;">Delete</button></div></section>'),ja=d('<div class="selected-preview svelte-1xl2tfr"><p class="svelte-1xl2tfr"><strong>Domain:</strong> </p> <p class="svelte-1xl2tfr"><strong>Judgment:</strong> <span> </span></p> <p class="svelte-1xl2tfr"><strong>Date:</strong> </p> <button class="button button-secondary" style="margin-top: var(--spacing-sm);">Clear</button></div>'),ka=d('<p style="color: var(--color-text-muted); font-style: italic;">Select a deliberation from the table</p>'),Ca=d('<div class="selected-preview svelte-1xl2tfr"><p class="svelte-1xl2tfr"><strong>Domain:</strong> </p> <p class="svelte-1xl2tfr"><strong>Judgment:</strong> <span> </span></p> <p class="svelte-1xl2tfr"><strong>Date:</strong> </p> <button class="button button-secondary" style="margin-top: var(--spacing-sm);">Clear</button></div>'),Sa=d('<p style="color: var(--color-text-muted); font-style: italic;">Select a deliberation from the table</p>'),za=d("<section><!></section>"),Wa=d('<section class="card"><div style="margin-bottom: var(--spacing-lg);"><h2 style="margin-bottom: var(--spacing-sm);" class="svelte-1xl2tfr">Select Deliberations to Compare</h2> <p style="color: var(--color-text-muted); font-size: var(--font-size-sm);">Click on two deliberations from the table above to see a side-by-side comparison</p></div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-lg); margin-bottom: var(--spacing-lg);"><div><h4 class="svelte-1xl2tfr">Deliberation 1</h4> <!></div> <div><h4 class="svelte-1xl2tfr">Deliberation 2</h4> <!></div></div></section> <!>',1),Va=d('<div class="container" style="padding: var(--spacing-2xl) 0;"><header style="margin-bottom: var(--spacing-2xl);"><div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: var(--spacing-md);"><div><h1>Deliberation History</h1> <p style="color: var(--color-text-muted);">Review past ethical deliberations and their multi-perspectival analyses</p></div> <!></div></header> <main class="flex-col gap-lg"><section><!></section> <!> <!></main></div>');function Ra(tt,We){dt(We,!1);let q=U([]),_=U(null),S=U(!0),F=U(!1),M=U(null),J=U(null);Tt(async()=>Lt.subscribe(z=>{D(q,z.history||[]),D(S,!1)}));function n(y){e(F)?e(M)?e(J)||(D(J,y.detail),setTimeout(()=>{document.querySelector(".comparison-slot")?.scrollIntoView({behavior:"smooth"})},100)):D(M,y.detail):(D(_,y.detail),setTimeout(()=>{document.getElementById("detail-view")?.scrollIntoView({behavior:"smooth"})},100))}function i(){D(_,null)}async function Z(y){confirm("Are you sure you want to delete this deliberation?")&&console.log("Delete deliberation:",y)}async function E(){const y=JSON.stringify(e(q),null,2),z=new Blob([y],{type:"application/json"}),T=URL.createObjectURL(z),v=document.createElement("a");v.href=T,v.download=`iee-history-${new Date().toISOString().split("T")[0]}.json`,v.click(),URL.revokeObjectURL(T)}function G(){D(F,!e(F)),e(F)||(D(M,null),D(J,null))}gt();var ye=Va(),Ve=a(ye),Ge=a(Ve),Ae=s(a(Ge),2);{var Ye=y=>{var z=_a(),T=a(z);let v;var p=a(T,!0);t(T);var m=s(T,2);t(z),f(()=>{v=ze(T,1,"button",null,v,{"button-secondary":!e(F)}),r(p,e(F)?"✓ Comparison Mode":"Compare Deliberations")}),te("click",T,G),te("click",m,E),l(y,z)};j(Ae,y=>{e(q).length>0&&y(Ye)})}t(Ge),t(Ve);var V=s(Ve,2),ae=a(V),Ie=a(ae);{var xe=y=>{var z=ha();l(y,z)},Me=y=>{var z=vt(),T=et(z);{var v=m=>{var k=fa(),R=s(a(k),4);t(k),f(()=>xt(R,"href",`${Dt??""}/deliberate`)),l(m,k)},p=m=>{Yt(m,{get history(){return e(q)},$$events:{select:n}})};j(T,m=>{e(q).length===0?m(v):m(p,!1)},!0)}l(y,z)};j(Ie,y=>{e(S)?y(xe):y(Me,!1)})}t(ae);var Je=s(ae,2);{var Ue=y=>{var z=$a(),T=a(z),v=s(a(T),2);t(T);var p=s(T,2),m=s(a(p),2),k=a(m),R=a(k,!0);t(k),t(m),t(p);var H=s(p,2),Y=s(a(H),2),se=a(Y),re=a(se),ee=a(re,!0);t(re),t(se);var le=s(se,2),pe=s(a(le));t(le);var we=s(le,2),I=s(a(we));t(we);var C=s(we,2),O=s(a(C));t(C),t(Y),t(H);var me=s(H,2),B=s(a(me),2),ie=a(B),De=a(ie,!0);t(ie),t(B),t(me);var K=s(me,2);{var _e=de=>{var Q=ya(),X=a(Q),Fe=a(X);t(X);var ce=s(X,2);ue(ce,5,()=>e(_).supportingWorldviews,be,(he,fe)=>{var ne=ba(),Te=a(ne,!0);t(ne),f(()=>r(Te,e(fe))),l(he,ne)}),t(ce),t(Q),f(()=>r(Fe,`Supporting Worldviews (${e(_).supportingWorldviews.length??""})`)),l(de,Q)};j(K,de=>{e(_).supportingWorldviews&&e(_).supportingWorldviews.length>0&&de(_e)})}var ge=s(K,2);{var $e=de=>{var Q=Da(),X=a(Q),Fe=a(X);t(X);var ce=s(X,4);ue(ce,5,()=>e(_).minorityViews,be,(he,fe)=>{var ne=wa(),Te=a(ne),Le=a(Te),at=a(Le);t(Le);var ke=s(Le,2),Re=a(ke,!0);t(ke),t(Te);var st=s(Te,2);{var Xe=Ze=>{var rt=xa(),ot=a(rt,!0);t(rt),f(()=>r(ot,e(fe).reasoning)),l(Ze,rt)};j(st,Ze=>{e(fe).reasoning&&Ze(Xe)})}t(ne),f(()=>{r(at,`${e(fe).worldview??""}:`),r(Re,e(fe).judgment)}),l(he,ne)}),t(ce),t(Q),f(()=>r(Fe,`Dissenting Perspectives (${e(_).minorityViews.length??""})`)),l(de,Q)};j(ge,de=>{e(_).minorityViews&&e(_).minorityViews.length>0&&de($e)})}var Ee=s(ge,2),Be=a(Ee),$=a(Be),c=s(a($),3),L=a(c,!0);t(c),t($);var ve=s($,2),Ne=s(a(ve),2);t(ve);var oe=s(ve,2),Oe=s(a(oe),2);t(oe),t(Be),t(Ee);var Qe=s(Ee,2),je=a(Qe),Pe=s(je,2);t(Qe),t(z),f((de,Q,X)=>{r(R,e(_).scenario?.description||"No description available"),Ce(re,`color: ${e(_).judgment==="permissible"?"#4f46e5":e(_).judgment==="impermissible"?"#d97706":"#6b7280"};`),r(ee,de),r(pe,` ${Q??""}%
							(${(e(_).confidenceLevel||"unknown")??""})`),r(I,` ${(e(_).domain||"unknown")??""}`),r(O,` ${(e(_).metadata?.evaluationsCount||e(_).worldviews?.length||0)??""}`),r(De,e(_).justification||"No justification available"),r(L,e(_).id),r(Ne,` ${X??""}`),r(Oe,` ${(e(_).metadata?.conflictsCount||0)??""}`),xt(je,"href",`${Dt??""}/deliberate`)},[()=>e(_).judgment?.toUpperCase()||"UNCERTAIN",()=>((e(_).confidence||0)*100).toFixed(0),()=>new Date(e(_).timestamp).toLocaleString()]),te("click",v,i),te("click",Pe,()=>Z(e(_).id)),l(y,z)};j(Je,y=>{e(_)&&y(Ue)})}var Ke=s(Je,2);{var qe=y=>{var z=Wa(),T=et(z),v=s(a(T),2),p=a(v);let m;var k=s(a(p),2);{var R=I=>{var C=ja(),O=a(C),me=s(a(O));t(O);var B=s(O,2),ie=s(a(B),2),De=a(ie,!0);t(ie),t(B);var K=s(B,2),_e=s(a(K));t(K);var ge=s(K,2);t(C),f($e=>{r(me,` ${e(M).domain??""}`),ze(ie,1,`badge badge-${e(M).judgment??""}`,"svelte-1xl2tfr"),r(De,e(M).judgment),r(_e,` ${$e??""}`)},[()=>new Date(e(M).timestamp).toLocaleDateString()]),te("click",ge,()=>D(M,null)),l(I,C)},H=I=>{var C=ka();l(I,C)};j(k,I=>{e(M)?I(R):I(H,!1)})}t(p);var Y=s(p,2);let se;var re=s(a(Y),2);{var ee=I=>{var C=Ca(),O=a(C),me=s(a(O));t(O);var B=s(O,2),ie=s(a(B),2),De=a(ie,!0);t(ie),t(B);var K=s(B,2),_e=s(a(K));t(K);var ge=s(K,2);t(C),f($e=>{r(me,` ${e(J).domain??""}`),ze(ie,1,`badge badge-${e(J).judgment??""}`,"svelte-1xl2tfr"),r(De,e(J).judgment),r(_e,` ${$e??""}`)},[()=>new Date(e(J).timestamp).toLocaleDateString()]),te("click",ge,()=>D(J,null)),l(I,C)},le=I=>{var C=Sa();l(I,C)};j(re,I=>{e(J)?I(ee):I(le,!1)})}t(Y),t(v),t(T);var pe=s(T,2);{var we=I=>{var C=za(),O=a(C);ma(O,{get deliberation1(){return e(M)},get deliberation2(){return e(J)}}),t(C),l(I,C)};j(pe,I=>{e(M)&&e(J)&&I(we)})}f(()=>{m=ze(p,1,"comparison-slot svelte-1xl2tfr",null,m,{selected:e(M)}),se=ze(Y,1,"comparison-slot svelte-1xl2tfr",null,se,{selected:e(J)})}),l(y,z)};j(Ke,y=>{e(F)&&y(qe)})}t(V),t(ye),l(tt,ye),ct()}export{Ra as component};
