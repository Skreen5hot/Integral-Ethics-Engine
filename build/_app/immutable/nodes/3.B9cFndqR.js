import{b as ot,d as yt,f as $,a as y,t as Ge,c as rt}from"../chunks/DEje7VYS.js";import{i as He}from"../chunks/BeHn0zvA.js";import{i as O,h as lt,a as ct,J as xt,b1 as bt,a2 as dt,ap as wt,az as kt,a_ as jt,aX as $t,aa as zt,ao as Ze,B as Tt,f as Ue,aj as Ie,ak as Xe,j as Ne,ag as M,o as e,k as i,n as a,s as B,m as xe,b2 as Mt,u as r,v as t,x as Ct,w as vt,ai as Qe,y as Oe,O as Ve}from"../chunks/CCMFVUdF.js";import{e as ye,s as _}from"../chunks/B_Eww-A_.js";import{i as K}from"../chunks/o6eeKhFx.js";import{e as Ae,i as De,s as Me}from"../chunks/Bc3xA_i-.js";import{p as G,s as It,a as At}from"../chunks/AVHD6OBG.js";import{v as Dt,d as at,s as Pt}from"../chunks/CmOhSLDN.js";import{s as St}from"../chunks/Cu22nZau.js";import{b as Et,s as Se}from"../chunks/Eo5B9jyt.js";import{a as Rt}from"../chunks/DuJWqsxJ.js";import{S as ut,r as Wt}from"../chunks/DLMsoh9U.js";import{o as Ot,c as Vt}from"../chunks/COCKnQ0O.js";import{b as Lt}from"../chunks/DjY7mxmK.js";function qt(h,o,n=!1,l=!1,j=!1){var s=h,T="";O(()=>{var c=xt;if(T===(T=o()??"")){lt&&ct();return}if(c.nodes!==null&&(bt(c.nodes.start,c.nodes.end),c.nodes=null),T!==""){if(lt){dt.data;for(var b=ct(),f=b;b!==null&&(b.nodeType!==wt||b.data!=="");)f=b,b=kt(b);if(b===null)throw jt(),$t;ot(dt,f),s=zt(b);return}var d=T+"";n?d=`<svg>${d}</svg>`:l&&(d=`<math>${d}</math>`);var k=yt(d);if((n||l)&&(k=Ze(k)),ot(Ze(k),k.lastChild),n||l)for(;Ze(k);)s.before(Ze(k));else s.before(k)}})}function Ft(h){return function(...o){var n=o[0];return n.stopPropagation(),h?.apply(this,o)}}function Jt(h,o){var n=h.$$events?.[o.type],l=Tt(n)?n.slice():n==null?[]:[n];for(var j of l)j.call(this,o)}var Ht=$('<p class="error-message svelte-117zjhm"> </p>'),Ut=$('<div class="error-messages svelte-117zjhm"></div>'),Nt=$("<option> </option>"),Bt=$('<button type="submit" class="button"><!></button>'),Gt=$('<span style="color: var(--color-error);">(minimum 10)</span>'),Xt=$('<span style="color: var(--color-warning);">(approaching limit of 5000)</span>'),Yt=$('<div class="character-count svelte-117zjhm"> <!></div>'),Qt=$('<form class="scenario-input svelte-117zjhm"><div class="form-group svelte-117zjhm"><label for="scenario-description" class="svelte-117zjhm">Scenario Description <span class="required svelte-117zjhm">*</span></label> <p class="help-text svelte-117zjhm">Describe the ethical dilemma or decision in detail (minimum 10 characters)</p> <textarea id="scenario-description" placeholder="Example: A patient is on life support with no chance of recovery. The family must decide whether to continue treatment or withdraw support..." rows="6" required></textarea> <!></div> <div class="form-group svelte-117zjhm"><label for="scenario-domain" class="svelte-117zjhm">Domain</label> <p class="help-text svelte-117zjhm">Specify the domain or leave blank for automatic detection</p> <select id="scenario-domain" class="svelte-117zjhm"></select></div> <details class="context-section svelte-117zjhm"><summary class="svelte-117zjhm">Additional Context (Optional)</summary> <div class="context-fields svelte-117zjhm"><p class="help-text svelte-117zjhm">Add any additional context that might be relevant to the deliberation</p> <p style="color: var(--color-text-muted); font-style: italic;">Context fields coming soon</p></div></details> <div class="form-actions svelte-117zjhm"><!></div> <!></form>');function Zt(h,o){Ue(o,!1);const n=xe();let l=G(o,"scenario",28,()=>({description:"",domain:"",context:{}})),j=G(o,"onSubmit",8,null),s=G(o,"disabled",8,!1),T=xe([]),c=xe({description:!1});const b=[{value:"",label:"Auto-detect domain"},{value:"healthcare",label:"Healthcare"},{value:"spiritual",label:"Spiritual / Religious"},{value:"education",label:"Education"},{value:"vocational",label:"Vocational / Career"},{value:"environmental",label:"Environmental"},{value:"interpersonal",label:"Interpersonal"},{value:"intellectual",label:"Intellectual / Research"},{value:"general",label:"General"}];function f(){const A=Dt(l());return B(T,A.valid?[]:A.errors),A.valid}function d(A){vt(c,e(c)[A]=!0),f()}function k(A){A.preventDefault(),vt(c,e(c).description=!0),f()&&j()&&j()(l())}Ie(()=>M(l()),()=>{l().description&&f()}),Ie(()=>(e(c),e(T)),()=>{B(n,e(c).description?e(T):[])}),Xe(),He();var v=Qt(),I=a(v),x=i(a(I),4);Mt(x);let D;var X=i(x,2);{var z=A=>{var P=Ut();Ae(P,5,()=>e(n),De,(E,ee)=>{var W=Ht(),u=a(W);t(W),O(()=>_(u,`‚ö†Ô∏è ${e(ee)??""}`)),y(E,W)}),t(P),y(A,P)};K(X,A=>{e(n),r(()=>e(n).length>0)&&A(z)})}t(I);var V=i(I,2),R=i(a(V),4);O(()=>{l(),Ct(()=>{s()})}),Ae(R,5,()=>b,De,(A,P)=>{var E=Nt(),ee=a(E,!0);t(E);var W={};O(()=>{_(ee,(e(P),r(()=>e(P).label))),W!==(W=(e(P),r(()=>e(P).value)))&&(E.value=(E.__value=(e(P),r(()=>e(P).value)))??"")}),y(A,E)}),t(R),t(V);var H=i(V,4),q=a(H);St(q,o,"actions",{},A=>{var P=Bt(),E=a(P);{var ee=u=>{var g=Ge("Processing...");y(u,g)},W=u=>{var g=Ge("Begin Deliberation");y(u,g)};K(E,u=>{s()?u(ee):u(W,!1)})}t(P),O(()=>P.disabled=(M(s()),e(n),r(()=>s()||e(n).length>0))),y(A,P)}),t(H);var ue=i(H,2);{var me=A=>{var P=Yt(),E=a(P),ee=i(E);{var W=g=>{var w=Gt();y(g,w)},u=g=>{var w=rt(),le=Qe(w);{var de=U=>{var se=Xt();y(U,se)};K(le,U=>{M(l()),r(()=>l().description.length>4900)&&U(de)},!0)}y(g,w)};K(ee,g=>{M(l()),r(()=>l().description.length<10)?g(W):g(u,!1)})}t(P),O(()=>_(E,`${M(l()),r(()=>l().description.length)??""} characters `)),y(A,P)};K(ue,A=>{M(l()),r(()=>l().description)&&A(me)})}t(v),O(()=>{x.disabled=s(),D=Se(x,1,"svelte-117zjhm",null,D,{error:e(n).length>0}),R.disabled=s()}),Rt(x,()=>l().description,A=>l(l().description=A,!0)),ye("blur",x,()=>d("description")),Et(R,()=>l().domain,A=>l(l().domain=A,!0)),ye("submit",v,k),y(h,v),Ne()}var Kt=$('<span class="cluster-badge svelte-1xe2ken"> </span>'),ea=$('<span style="color: var(--color-warning);"> </span>'),ta=$('<span class="value-tag svelte-1xe2ken"> </span>'),aa=$('<div class="values-section svelte-1xe2ken"><h5 class="svelte-1xe2ken">Values Emphasized</h5> <div class="values-list svelte-1xe2ken"></div></div>'),sa=$(`<div class="uncertainty-notice svelte-1xe2ken"><p class="svelte-1xe2ken">‚ö†Ô∏è <strong>Epistemic Notice:</strong> There is significant uncertainty regarding this perspective's evaluation. <!></p></div>`),ia=$('<div class="card-details svelte-1xe2ken"><div class="reasoning-section svelte-1xe2ken"><h5 class="svelte-1xe2ken">Reasoning</h5> <p class="reasoning-text svelte-1xe2ken"> </p></div> <!> <!></div>'),na=$('<div><div class="card-header svelte-1xe2ken" role="button" tabindex="0"><div class="header-left svelte-1xe2ken"><h4 class="svelte-1xe2ken"> </h4> <!></div> <div class="header-right"><button class="expand-toggle svelte-1xe2ken" aria-label="Toggle details"> </button></div></div> <div class="card-summary svelte-1xe2ken"><div class="summary-item svelte-1xe2ken"><span class="label svelte-1xe2ken">This perspective:</span> <span> </span></div> <div class="summary-item svelte-1xe2ken"><span class="label svelte-1xe2ken">Certainty:</span> <div class="confidence-bar-container svelte-1xe2ken"><div class="confidence-bar svelte-1xe2ken"></div> <span class="confidence-text svelte-1xe2ken"><!></span></div></div> <div class="summary-item svelte-1xe2ken"><span class="label svelte-1xe2ken">Moral Salience:</span> <span class="weight-text svelte-1xe2ken"> </span></div></div> <!></div>');function mt(h,o){Ue(o,!1);const n=xe(),l=xe(),j=xe();let s=G(o,"worldview",8,""),T=G(o,"judgment",8,"uncertain"),c=G(o,"confidence",8,.5),b=G(o,"reasoning",8,""),f=G(o,"values",24,()=>[]),d=G(o,"weight",8,.5),k=G(o,"cluster",8,""),v=G(o,"expanded",12,!1);const I={"Material-Empirical":"#10b981","Process-Individual":"#3b82f6","Depth-Spiritual":"#8b5cf6"},x={permissible:"#4f46e5",impermissible:"#d97706",uncertain:"#6b7280"},D={permissible:"Affirming",impermissible:"Concerning",uncertain:"Uncertain"};function X(){v(!v())}Ie(()=>M(c()),()=>{B(n,1-c())}),Ie(()=>e(n),()=>{B(l,e(n)>.4)}),Ie(()=>e(n),()=>{B(j,1-e(n)*.3)}),Xe(),He();var z=na();let V;var R=a(z),H=a(R),q=a(H),ue=a(q,!0);t(q);var me=i(q,2);{var A=p=>{var m=Kt(),S=a(m,!0);t(m),O(()=>{Me(m,`background: ${M(k()),r(()=>I[k()])??""};`),_(S,k())}),y(p,m)};K(me,p=>{k()&&p(A)})}t(H);var P=i(H,2),E=a(P),ee=a(E,!0);t(E),t(P),t(R);var W=i(R,2),u=a(W),g=i(a(u),2);let w;var le=a(g,!0);t(g),t(u);var de=i(u,2),U=i(a(de),2),se=a(U),Y=i(se,2),ge=a(Y);{var re=p=>{var m=ea(),S=a(m);t(m),O(ie=>_(S,`Significant uncertainty (${ie??""}%)`),[()=>(M(c()),r(()=>(c()*100).toFixed(0)))]),y(p,m)},he=p=>{var m=Ge();O(S=>_(m,`${S??""}%`),[()=>(M(c()),r(()=>(c()*100).toFixed(0)))]),y(p,m)};K(ge,p=>{e(l)?p(re):p(he,!1)})}t(Y),t(U),t(de);var Q=i(de,2),L=i(a(Q),2),ke=a(L);t(L),t(Q),t(W);var be=i(W,2);{var fe=p=>{var m=ia(),S=a(m),ie=i(a(S),2),Z=a(ie,!0);t(ie),t(S);var F=i(S,2);{var te=ne=>{var oe=aa(),pe=i(a(oe),2);Ae(pe,5,f,De,(_e,N)=>{var J=ta(),ve=a(J,!0);t(J),O(ae=>_(ve,ae),[()=>(e(N),r(()=>e(N).replace(/_/g," ")))]),y(_e,J)}),t(pe),t(oe),y(ne,oe)};K(F,ne=>{M(f()),r(()=>f()&&f().length>0)&&ne(te)})}var C=i(F,2);{var ce=ne=>{var oe=sa(),pe=a(oe),_e=i(a(pe),3);{var N=J=>{var ve=Ge("This may indicate limited grounding data for this worldview in this context.");y(J,ve)};K(_e,J=>{e(n)>.6&&J(N)})}t(pe),t(oe),y(ne,oe)};K(C,ne=>{e(l)&&ne(ce)})}t(m),O(()=>_(Z,b())),y(p,m)};K(be,p=>{v()&&p(fe)})}t(z),O(p=>{V=Se(z,1,"worldview-card svelte-1xe2ken",null,V,{expanded:v()}),Me(z,`border-left-color: ${M(k()),r(()=>I[k()]||"#6b7280")??""}; opacity: ${e(j)??""};`),_(ue,s()),_(ee,v()?"‚ñº":"‚ñ∂"),w=Se(g,1,"judgment-badge svelte-1xe2ken",null,w,{uncertain:e(l)}),Me(g,`background: ${M(T()),r(()=>x[T()])??""}; opacity: ${e(j)??""};`),_(le,(M(T()),r(()=>D[T()]))),Me(se,`width: ${c()*100}%; background: ${M(T()),r(()=>x[T()])??""};`),_(ke,`${p??""}% in this domain`)},[()=>(M(d()),r(()=>(d()*100).toFixed(0)))]),ye("click",R,X),ye("keypress",R,X),y(h,z),Ne()}function pt(h){return typeof h=="string"?new ut([[document.querySelector(h)]],[document.documentElement]):new ut([[h]],Wt)}const it=Math.PI,nt=2*it,Je=1e-6,ra=nt-Je;function _t(h){this._+=h[0];for(let o=1,n=h.length;o<n;++o)this._+=arguments[o]+h[o]}function oa(h){let o=Math.floor(h);if(!(o>=0))throw new Error(`invalid digits: ${h}`);if(o>15)return _t;const n=10**o;return function(l){this._+=l[0];for(let j=1,s=l.length;j<s;++j)this._+=Math.round(arguments[j]*n)/n+l[j]}}class la{constructor(o){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=o==null?_t:oa(o)}moveTo(o,n){this._append`M${this._x0=this._x1=+o},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(o,n){this._append`L${this._x1=+o},${this._y1=+n}`}quadraticCurveTo(o,n,l,j){this._append`Q${+o},${+n},${this._x1=+l},${this._y1=+j}`}bezierCurveTo(o,n,l,j,s,T){this._append`C${+o},${+n},${+l},${+j},${this._x1=+s},${this._y1=+T}`}arcTo(o,n,l,j,s){if(o=+o,n=+n,l=+l,j=+j,s=+s,s<0)throw new Error(`negative radius: ${s}`);let T=this._x1,c=this._y1,b=l-o,f=j-n,d=T-o,k=c-n,v=d*d+k*k;if(this._x1===null)this._append`M${this._x1=o},${this._y1=n}`;else if(v>Je)if(!(Math.abs(k*b-f*d)>Je)||!s)this._append`L${this._x1=o},${this._y1=n}`;else{let I=l-T,x=j-c,D=b*b+f*f,X=I*I+x*x,z=Math.sqrt(D),V=Math.sqrt(v),R=s*Math.tan((it-Math.acos((D+v-X)/(2*z*V)))/2),H=R/V,q=R/z;Math.abs(H-1)>Je&&this._append`L${o+H*d},${n+H*k}`,this._append`A${s},${s},0,0,${+(k*I>d*x)},${this._x1=o+q*b},${this._y1=n+q*f}`}}arc(o,n,l,j,s,T){if(o=+o,n=+n,l=+l,T=!!T,l<0)throw new Error(`negative radius: ${l}`);let c=l*Math.cos(j),b=l*Math.sin(j),f=o+c,d=n+b,k=1^T,v=T?j-s:s-j;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>Je||Math.abs(this._y1-d)>Je)&&this._append`L${f},${d}`,l&&(v<0&&(v=v%nt+nt),v>ra?this._append`A${l},${l},0,1,${k},${o-c},${n-b}A${l},${l},0,1,${k},${this._x1=f},${this._y1=d}`:v>Je&&this._append`A${l},${l},0,${+(v>=it)},${k},${this._x1=o+l*Math.cos(s)},${this._y1=n+l*Math.sin(s)}`)}rect(o,n,l,j){this._append`M${this._x0=this._x1=+o},${this._y0=this._y1=+n}h${l=+l}v${+j}h${-l}Z`}toString(){return this._}}function Le(h){return function(){return h}}const ht=Math.abs,ze=Math.atan2,Fe=Math.cos,ca=Math.max,st=Math.min,We=Math.sin,Be=Math.sqrt,Te=1e-12,Ye=Math.PI,et=Ye/2,da=2*Ye;function va(h){return h>1?0:h<-1?Ye:Math.acos(h)}function gt(h){return h>=1?et:h<=-1?-et:Math.asin(h)}function ua(h){let o=3;return h.digits=function(n){if(!arguments.length)return o;if(n==null)o=null;else{const l=Math.floor(n);if(!(l>=0))throw new RangeError(`invalid digits: ${n}`);o=l}return h},()=>new la(o)}function ma(h){return h.innerRadius}function pa(h){return h.outerRadius}function ha(h){return h.startAngle}function ga(h){return h.endAngle}function fa(h){return h&&h.padAngle}function _a(h,o,n,l,j,s,T,c){var b=n-h,f=l-o,d=T-j,k=c-s,v=k*b-d*f;if(!(v*v<Te))return v=(d*(o-s)-k*(h-j))/v,[h+v*b,o+v*f]}function Ke(h,o,n,l,j,s,T){var c=h-n,b=o-l,f=(T?s:-s)/Be(c*c+b*b),d=f*b,k=-f*c,v=h+d,I=o+k,x=n+d,D=l+k,X=(v+x)/2,z=(I+D)/2,V=x-v,R=D-I,H=V*V+R*R,q=j-s,ue=v*D-x*I,me=(R<0?-1:1)*Be(ca(0,q*q*H-ue*ue)),A=(ue*R-V*me)/H,P=(-ue*V-R*me)/H,E=(ue*R+V*me)/H,ee=(-ue*V+R*me)/H,W=A-X,u=P-z,g=E-X,w=ee-z;return W*W+u*u>g*g+w*w&&(A=E,P=ee),{cx:A,cy:P,x01:-d,y01:-k,x11:A*(j/q-1),y11:P*(j/q-1)}}function ft(){var h=ma,o=pa,n=Le(0),l=null,j=ha,s=ga,T=fa,c=null,b=ua(f);function f(){var d,k,v=+h.apply(this,arguments),I=+o.apply(this,arguments),x=j.apply(this,arguments)-et,D=s.apply(this,arguments)-et,X=ht(D-x),z=D>x;if(c||(c=d=b()),I<v&&(k=I,I=v,v=k),!(I>Te))c.moveTo(0,0);else if(X>da-Te)c.moveTo(I*Fe(x),I*We(x)),c.arc(0,0,I,x,D,!z),v>Te&&(c.moveTo(v*Fe(D),v*We(D)),c.arc(0,0,v,D,x,z));else{var V=x,R=D,H=x,q=D,ue=X,me=X,A=T.apply(this,arguments)/2,P=A>Te&&(l?+l.apply(this,arguments):Be(v*v+I*I)),E=st(ht(I-v)/2,+n.apply(this,arguments)),ee=E,W=E,u,g;if(P>Te){var w=gt(P/v*We(A)),le=gt(P/I*We(A));(ue-=w*2)>Te?(w*=z?1:-1,H+=w,q-=w):(ue=0,H=q=(x+D)/2),(me-=le*2)>Te?(le*=z?1:-1,V+=le,R-=le):(me=0,V=R=(x+D)/2)}var de=I*Fe(V),U=I*We(V),se=v*Fe(q),Y=v*We(q);if(E>Te){var ge=I*Fe(R),re=I*We(R),he=v*Fe(H),Q=v*We(H),L;if(X<Ye)if(L=_a(de,U,he,Q,ge,re,se,Y)){var ke=de-L[0],be=U-L[1],fe=ge-L[0],p=re-L[1],m=1/We(va((ke*fe+be*p)/(Be(ke*ke+be*be)*Be(fe*fe+p*p)))/2),S=Be(L[0]*L[0]+L[1]*L[1]);ee=st(E,(v-S)/(m-1)),W=st(E,(I-S)/(m+1))}else ee=W=0}me>Te?W>Te?(u=Ke(he,Q,de,U,I,W,z),g=Ke(ge,re,se,Y,I,W,z),c.moveTo(u.cx+u.x01,u.cy+u.y01),W<E?c.arc(u.cx,u.cy,W,ze(u.y01,u.x01),ze(g.y01,g.x01),!z):(c.arc(u.cx,u.cy,W,ze(u.y01,u.x01),ze(u.y11,u.x11),!z),c.arc(0,0,I,ze(u.cy+u.y11,u.cx+u.x11),ze(g.cy+g.y11,g.cx+g.x11),!z),c.arc(g.cx,g.cy,W,ze(g.y11,g.x11),ze(g.y01,g.x01),!z))):(c.moveTo(de,U),c.arc(0,0,I,V,R,!z)):c.moveTo(de,U),!(v>Te)||!(ue>Te)?c.lineTo(se,Y):ee>Te?(u=Ke(se,Y,ge,re,v,-ee,z),g=Ke(de,U,he,Q,v,-ee,z),c.lineTo(u.cx+u.x01,u.cy+u.y01),ee<E?c.arc(u.cx,u.cy,ee,ze(u.y01,u.x01),ze(g.y01,g.x01),!z):(c.arc(u.cx,u.cy,ee,ze(u.y01,u.x01),ze(u.y11,u.x11),!z),c.arc(0,0,v,ze(u.cy+u.y11,u.cx+u.x11),ze(g.cy+g.y11,g.cx+g.x11),z),c.arc(g.cx,g.cy,ee,ze(g.y11,g.x11),ze(g.y01,g.x01),!z))):c.arc(0,0,v,q,H,z)}if(c.closePath(),d)return c=null,d+""||null}return f.centroid=function(){var d=(+h.apply(this,arguments)+ +o.apply(this,arguments))/2,k=(+j.apply(this,arguments)+ +s.apply(this,arguments))/2-Ye/2;return[Fe(k)*d,We(k)*d]},f.innerRadius=function(d){return arguments.length?(h=typeof d=="function"?d:Le(+d),f):h},f.outerRadius=function(d){return arguments.length?(o=typeof d=="function"?d:Le(+d),f):o},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:Le(+d),f):n},f.padRadius=function(d){return arguments.length?(l=d==null?null:typeof d=="function"?d:Le(+d),f):l},f.startAngle=function(d){return arguments.length?(j=typeof d=="function"?d:Le(+d),f):j},f.endAngle=function(d){return arguments.length?(s=typeof d=="function"?d:Le(+d),f):s},f.padAngle=function(d){return arguments.length?(T=typeof d=="function"?d:Le(+d),f):T},f.context=function(d){return arguments.length?(c=d??null,f):c},f}var ya=$('<div class="legend-item contested-indicator svelte-ov15a8"><div class="legend-swatch svelte-ov15a8" style="background: #fb923c; border: 3px solid #fb923c;"></div> <span>Orange Stroke = Winner (Contested)</span></div> <div class="legend-item contested-indicator svelte-ov15a8"><div class="legend-swatch svelte-ov15a8" style="background: #fbbf24; border: 2px solid #fbbf24;"></div> <span>Amber Stroke = Second Place</span></div>',1),xa=$('<div class="conflict-map-container svelte-ov15a8"><div class="agent-status svelte-ov15a8"><strong class="svelte-ov15a8">Model Output:</strong> Multi-perspectival Analysis. <span style="font-style: italic;">This system bears no moral cost for this evaluation. Action requires human agency.</span></div> <svg class="conflict-map-svg svelte-ov15a8"></svg> <div class="legend svelte-ov15a8"><div class="legend-title svelte-ov15a8">Visual Encoding</div> <div class="legend-items svelte-ov15a8"><div class="legend-item svelte-ov15a8"><div class="legend-swatch svelte-ov15a8"></div> <span>Radial Distance = Moral Salience</span></div> <div class="legend-item svelte-ov15a8"><div class="legend-swatch svelte-ov15a8"></div> <span>Indigo = Affirming</span></div> <div class="legend-item svelte-ov15a8"><div class="legend-swatch svelte-ov15a8"></div> <span>Ochre = Concerning</span></div> <div class="legend-item svelte-ov15a8"><div class="legend-swatch svelte-ov15a8"></div> <span>Gray = Uncertain</span></div> <div class="legend-item svelte-ov15a8"><div class="legend-swatch dashed svelte-ov15a8"></div> <span>Dashed = High Uncertainty</span></div> <div class="legend-item svelte-ov15a8"><div class="legend-swatch svelte-ov15a8" style="background: #ef4444; opacity: 0.6;"></div> <span>Red Lines = Conflicts</span></div> <!></div></div></div>');function ba(h,o){Ue(o,!1);let n=G(o,"worldviews",24,()=>[]),l=G(o,"conflicts",24,()=>[]),j=G(o,"width",8,600),s=G(o,"height",8,600),T=G(o,"isContested",8,!1),c=G(o,"winningJudgment",8,null),b=G(o,"secondPlace",8,null);G(o,"margin",8,null);let f=G(o,"marginPercent",8,null),d=xe();const k=[{name:"Material-Empirical",worldviews:["materialism","sensationalism","phenomenalism","realism"],color:"#10b981"},{name:"Process-Individual",worldviews:["dynamism","monadism","idealism","rationalism"],color:"#3b82f6"},{name:"Depth-Spiritual",worldviews:["psychism","pneumatism","spiritualism","mathematism"],color:"#8b5cf6"}],v={permissible:"#4f46e5",impermissible:"#d97706",uncertain:"#6b7280"},I=["materialism","sensationalism","phenomenalism","realism","dynamism","monadism","idealism","rationalism","psychism","pneumatism","spiritualism","mathematism"];function x(){if(!e(d)||!n()||n().length===0)return;pt(e(d)).selectAll("*").remove();const g=Math.min(j(),s())/2-80,w=j()/2,le=s()/2,U=pt(e(d)).attr("width",j()).attr("height",s()).append("g").attr("transform",`translate(${w}, ${le})`),se=2*Math.PI/12;k.forEach((Y,ge)=>{const re=ge*4,he=re*se-Math.PI/2,Q=(re+4)*se-Math.PI/2,L=ft().innerRadius(0).outerRadius(g).startAngle(he).endAngle(Q);U.append("path").attr("d",L).attr("fill",Y.color).attr("opacity",.05).attr("class","cluster-background")}),n().forEach((Y,ge)=>{const re=I.indexOf(Y.worldview.toLowerCase());if(re===-1){console.warn(`Worldview ${Y.worldview} not found in worldviewOrder`);return}const he=re*se-Math.PI/2,Q=(re+1)*se-Math.PI/2,L=Y.weight||.5,ke=g*L,be=1-Y.confidence,fe=1-be*.5,p=v[Y.judgment]||v.uncertain,m=be>.4,S=T()&&Y.judgment===c(),ie=T()&&Y.judgment===b(),Z=ft().innerRadius(g*.3).outerRadius(ke).startAngle(he).endAngle(Q-.05),F=U.append("path").attr("d",Z).attr("fill",p).attr("opacity",fe).attr("stroke",S?"#fb923c":ie?"#fbbf24":p).attr("stroke-width",S?4:ie?3:2).attr("class",`worldview-arc ${S?"contested-winner":""} ${ie?"contested-second":""}`);m&&F.attr("stroke-dasharray","5,5"),F.append("title").text(()=>{let oe=`${Y.worldview}
Judgment: ${Y.judgment}
Confidence: ${(Y.confidence*100).toFixed(0)}%
Weight: ${(Y.weight*100).toFixed(0)}%`;return T()&&(oe+=`

Contested Judgment:`,oe+=`
Margin: ${f()!==null?(f()*100).toFixed(1):"~"}%`,S?oe+=`
(Winner by narrow margin)`:ie&&(oe+=`
(Second place)`)),oe});const te=he+se/2,C=g+20,ce=Math.cos(te)*C,ne=Math.sin(te)*C;U.append("text").attr("x",ce).attr("y",ne).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").attr("font-weight","600").attr("fill","#374151").text(Y.worldview)}),l()&&l().length>0&&l().forEach(Y=>{const ge=I.indexOf(Y.worldviews?.[0]),re=I.indexOf(Y.worldviews?.[1]);if(ge===-1||re===-1)return;const he=ge*se-Math.PI/2,Q=re*se-Math.PI/2,L=g*.35,ke=Math.cos(he+se/2)*L,be=Math.sin(he+se/2)*L,fe=Math.cos(Q+se/2)*L,p=Math.sin(Q+se/2)*L;U.append("line").attr("x1",ke).attr("y1",be).attr("x2",fe).attr("y2",p).attr("stroke","#ef4444").attr("stroke-width",1.5).attr("stroke-dasharray","3,3").attr("opacity",.6).attr("class","conflict-line")}),U.append("circle").attr("r",g*.25).attr("fill","none").attr("stroke","#d1d5db").attr("stroke-width",2).attr("stroke-dasharray","2,2").attr("opacity",.5),U.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","11px").attr("font-style","italic").attr("fill","#9ca3af").text("Space of Freedom")}Ot(()=>{x()}),Ie(()=>(M(n()),e(d)),()=>{n()&&e(d)&&x()}),Xe(),He();var D=xa(),X=i(a(D),2);Lt(X,u=>B(d,u),()=>e(d));var z=i(X,2),V=i(a(z),2),R=a(V),H=a(R);Oe(2),t(R);var q=i(R,2),ue=a(q);Oe(2),t(q);var me=i(q,2),A=a(me);Oe(2),t(me);var P=i(me,2),E=a(P);Oe(2),t(P);var ee=i(P,6);{var W=u=>{var g=ya();Oe(2),y(u,g)};K(ee,u=>{T()&&u(W)})}t(V),t(z),t(D),O(()=>{Me(H,`background: linear-gradient(to right, transparent, ${r(()=>v.permissible)??""});`),Me(ue,`background: ${r(()=>v.permissible)??""};`),Me(A,`background: ${r(()=>v.impermissible)??""};`),Me(E,`background: ${r(()=>v.uncertain)??""};`)}),y(h,D),Ne()}var wa=$("in the <strong> </strong> domain",1),ka=$('<div class="contested-metadata svelte-1ywh8lz"><span class="metadata-item svelte-1ywh8lz"> </span> <span class="metadata-item svelte-1ywh8lz"> </span> <span class="metadata-item svelte-1ywh8lz"> </span></div>'),ja=$(`<div class="contested-notice svelte-1ywh8lz"><div class="contested-header svelte-1ywh8lz"><span class="contested-icon svelte-1ywh8lz">‚ö†Ô∏è</span> <strong>Contested Judgment Detected</strong></div> <p class="svelte-1ywh8lz">This is a <strong>close call</strong>, not a clear consensus. The winning judgment
					(<strong> </strong>) narrowly prevails over the runner-up
					(<strong> </strong>) by only <strong> </strong>.</p> <p class="contested-explanation svelte-1ywh8lz"><em>In ethics, narrow margins signal a <strong>crisis of competing values</strong>,
					not a decisive answer. This judgment requires careful consideration and may vary
					with context.</em></p> <!></div>`),$a=$('<div class="tension-notice svelte-1ywh8lz"><p class="svelte-1ywh8lz">‚ö° <strong>Tension Identified:</strong> </p></div>'),za=$('<span class="worldview-badge supporting svelte-1ywh8lz"> </span>'),Ta=$('<div class="supporting-section svelte-1ywh8lz"><h4 class="svelte-1ywh8lz"> </h4> <p class="section-description svelte-1ywh8lz">The following worldviews converge on this judgment:</p> <div class="worldview-badges svelte-1ywh8lz"></div></div>'),Ma=$('<p class="minority-reasoning svelte-1ywh8lz"> </p>'),Ca=$('<div class="minority-view-card svelte-1ywh8lz"><div class="minority-header svelte-1ywh8lz"><strong> </strong> <span class="minority-judgment-badge svelte-1ywh8lz"> </span></div> <!></div>'),Ia=$(`<div class="minority-section svelte-1ywh8lz"><h4 class="svelte-1ywh8lz"> </h4> <p class="section-description svelte-1ywh8lz"><strong>Epistemic Humility:</strong> These worldviews reached different conclusions.
				Their perspectives are preserved to avoid premature consensus.</p> <div class="minority-views-list svelte-1ywh8lz"></div></div>`),Aa=$(`<div class="integrated-judgment-container svelte-1ywh8lz"><div class="judgment-header svelte-1ywh8lz"><h3 class="svelte-1ywh8lz">Integrated Multi-Perspectival Analysis</h3> <p class="header-subtitle svelte-1ywh8lz"> <!></p></div> <div class="judgment-primary svelte-1ywh8lz"><div class="judgment-label svelte-1ywh8lz"> </div> <div class="confidence-indicator svelte-1ywh8lz"><div class="confidence-bar-container svelte-1ywh8lz"><div class="confidence-bar svelte-1ywh8lz"></div></div> <p class="confidence-text svelte-1ywh8lz"><strong>Epistemic Status:</strong> </p></div> <!> <!></div> <div class="justification-section svelte-1ywh8lz"><h4 class="svelte-1ywh8lz">Multi-Perspectival Reasoning</h4> <div class="justification-content svelte-1ywh8lz"><!></div></div> <!> <!> <div class="epistemic-notice svelte-1ywh8lz"><p class="svelte-1ywh8lz"><strong>Note:</strong> This analysis illuminates the structural complexity of the choice
			but does not prescribe action. The final decision remains with the moral agent who bears
			the existential responsibility for this choice.</p></div></div>`);function Da(h,o){Ue(o,!1);const n=xe();let l=G(o,"judgment",8,"uncertain"),j=G(o,"confidence",8,.5),s=G(o,"confidenceLevel",8,"moderate"),T=G(o,"justification",8,""),c=G(o,"supportingWorldviews",24,()=>[]),b=G(o,"minorityViews",24,()=>[]),f=G(o,"domain",8,""),d=G(o,"conflictsCount",8,0),k=G(o,"isContested",8,!1);G(o,"margin",8,null);let v=G(o,"marginPercent",8,null),I=G(o,"secondPlace",8,null);G(o,"secondPlaceScore",8,null);let x=G(o,"agreement",8,null),D=G(o,"quorum",8,null);const X={permissible:"#4f46e5",impermissible:"#d97706",uncertain:"#6b7280"},z={permissible:"The integrated perspective tends toward affirmation",impermissible:"The integrated perspective identifies significant concerns",uncertain:"The integrated perspective remains uncertain"},V={low:"There is significant uncertainty across worldviews",moderate:"There is moderate agreement among worldviews",high:"There is substantial convergence among worldviews"};function R(p){return p?p.split(`
`).map(m=>(m=m.trim(),m?m.startsWith("# ")?`<h3 class="just-h1">${m.substring(2)}</h3>`:m.startsWith("## ")?`<h4 class="just-h2">${m.substring(3)}</h4>`:m.startsWith("### ")?`<h5 class="just-h3">${m.substring(4)}</h5>`:m.match(/^\*\*.*\*\*:?\s*/)?`<p class="just-bold">${m.replace(/\*\*/g,"<strong>").replace(/<strong>/g,"").replace(/<\/strong>/g,"")}</strong></p>`:m.startsWith("- ")?`<li>${m.substring(2)}</li>`:`<p class="just-p">${m}</p>`:"")).filter(m=>m).join(""):""}Ie(()=>M(T()),()=>{B(n,R(T()))}),Xe(),He();var H=Aa(),q=a(H),ue=i(a(q),2),me=a(ue),A=i(me);{var P=p=>{var m=wa(),S=i(Qe(m)),ie=a(S,!0);t(S),Oe(),O(()=>_(ie,f())),y(p,m)};K(A,p=>{f()&&p(P)})}t(ue),t(q);var E=i(q,2),ee=a(E),W=a(ee,!0);t(ee);var u=i(ee,2),g=a(u),w=a(g);t(g);var le=i(g,2),de=i(a(le));t(le),t(u);var U=i(u,2);{var se=p=>{var m=ja(),S=i(a(m),2),ie=i(a(S),3),Z=a(ie,!0);t(ie);var F=i(ie,2),te=a(F,!0);t(F);var C=i(F,2),ce=a(C);t(C),Oe(),t(S);var ne=i(S,4);{var oe=pe=>{var _e=ka(),N=a(_e),J=a(N);t(N);var ve=i(N,2),ae=a(ve);t(ve);var we=i(ve,2),Pe=a(we);t(we),t(_e),O((qe,Ee,je)=>{_(J,`Agreement: ${qe??""}%`),_(ae,`Quorum: ${Ee??""}%`),_(Pe,`Margin: ${je??""}%`)},[()=>(M(x()),r(()=>Math.round(x()*100))),()=>(M(D()),r(()=>Math.round(D()*100))),()=>(M(v()),r(()=>v()!==null?Math.round(v()*100):"~"))]),y(pe,_e)};K(ne,pe=>{x()!==null&&D()!==null&&pe(oe)})}t(m),O(pe=>{_(Z,l()),_(te,I()||"alternative"),_(ce,`${pe??""}%`)},[()=>(M(v()),r(()=>v()!==null?Math.round(v()*100):"~"))]),y(p,m)};K(U,p=>{k()&&p(se)})}var Y=i(U,2);{var ge=p=>{var m=$a(),S=a(m),ie=i(a(S),2);t(S),t(m),O(()=>_(ie,` ${d()??""} ${d()===1?"conflict":"conflicts"} detected between worldviews.
					See minority views below for dissenting perspectives.`)),y(p,m)};K(Y,p=>{d()>0&&!k()&&p(ge)})}t(E);var re=i(E,2),he=i(a(re),2),Q=a(he);qt(Q,()=>e(n)),t(he),t(re);var L=i(re,2);{var ke=p=>{var m=Ta(),S=a(m),ie=a(S);t(S);var Z=i(S,4);Ae(Z,5,c,De,(F,te)=>{var C=za(),ce=a(C,!0);t(C),O(()=>{Me(C,`background: ${M(l()),r(()=>X[l()])??""};`),_(ce,e(te))}),y(F,C)}),t(Z),t(m),O(()=>_(ie,`Aligned Perspectives (${M(c()),r(()=>c().length)??""})`)),y(p,m)};K(L,p=>{M(c()),r(()=>c()&&c().length>0)&&p(ke)})}var be=i(L,2);{var fe=p=>{var m=Ia(),S=a(m),ie=a(S);t(S);var Z=i(S,4);Ae(Z,5,b,De,(F,te)=>{var C=Ca(),ce=a(C),ne=a(ce),oe=a(ne,!0);t(ne);var pe=i(ne,2),_e=a(pe,!0);t(pe),t(ce);var N=i(ce,2);{var J=ve=>{var ae=Ma(),we=a(ae);t(ae),O(()=>_(we,`"${e(te),r(()=>e(te).reasoning)??""}"`)),y(ve,ae)};K(N,ve=>{e(te),r(()=>e(te).reasoning)&&ve(J)})}t(C),O(()=>{_(oe,(e(te),r(()=>e(te).worldview))),_(_e,(e(te),r(()=>e(te).judgment)))}),y(F,C)}),t(Z),t(m),O(()=>_(ie,`Dissenting Perspectives (${M(b()),r(()=>b().length)??""})`)),y(p,m)};K(be,p=>{M(b()),r(()=>b()&&b().length>0)&&p(fe)})}Oe(2),t(H),O(p=>{_(me,`Synthesis across ${M(c()),M(b()),r(()=>c().length+b().length)??""} worldview perspectives `),Me(E,`border-left-color: ${M(l()),r(()=>X[l()])??""};`),_(W,(M(l()),r(()=>z[l()]))),Me(w,`width: ${j()*100}%; background: ${M(l()),r(()=>X[l()])??""};`),_(de,` ${M(s()),r(()=>V[s()])??""}
				(${p??""}% confidence)`)},[()=>(M(j()),r(()=>(j()*100).toFixed(0)))]),y(h,H),Ne()}var Pa=$('<span class="tag svelte-j3ixxh"> </span>'),Sa=$('<button><h3 class="svelte-j3ixxh"> </h3> <p class="template-preview svelte-j3ixxh"> </p> <div class="template-tags svelte-j3ixxh"></div></button>'),Ea=$('<span class="tag svelte-j3ixxh"> </span>'),Ra=$('<div class="template-detail svelte-j3ixxh"><h3 class="svelte-j3ixxh"> </h3> <p class="description svelte-j3ixxh"> </p> <div class="template-tags svelte-j3ixxh"></div></div>'),Wa=$('<div class="modal-backdrop svelte-j3ixxh"><div class="modal-content svelte-j3ixxh"><div class="modal-header svelte-j3ixxh"><h2 class="svelte-j3ixxh">Scenario Templates</h2> <button class="close-button svelte-j3ixxh" aria-label="Close">√ó</button></div> <div class="modal-body svelte-j3ixxh"><div class="domain-tabs svelte-j3ixxh"><button>Healthcare</button> <button>Spiritual</button> <button>Education</button> <button>Vocational</button> <button>Environmental</button> <button>Interpersonal</button> <button>Intellectual</button> <button>General</button></div> <div class="template-list svelte-j3ixxh"></div> <!></div> <div class="modal-footer svelte-j3ixxh"><button class="button button-secondary">Cancel</button> <button class="button">Load Template</button></div></div></div>');function Oa(h,o){Ue(o,!1);const n=xe(),l=xe(),j=Vt();let s=G(o,"show",12,!1);const T={healthcare:[{title:"End-of-Life Care Decision",description:"A 78-year-old patient with terminal cancer is on life support with no chance of recovery. The family must decide whether to continue aggressive treatment or transition to comfort care. The patient left no advance directive, but had previously mentioned preferring quality of life over prolonged suffering.",tags:["end-of-life","family decision","terminal illness"]},{title:"Experimental Treatment Access",description:"A pharmaceutical company offers a patient access to an experimental drug that shows promise but has not completed clinical trials. The treatment could extend life by 6-12 months but carries unknown risks. Insurance will not cover the $200,000 cost.",tags:["experimental","cost","risk-benefit"]},{title:"Organ Donation Priority",description:"Two patients need a liver transplant. One is a 45-year-old parent of three who developed liver disease through no fault of their own. The other is a 28-year-old with self-inflicted damage from alcohol abuse but has been sober for 2 years. Only one liver is available.",tags:["allocation","fairness","desert"]}],spiritual:[{title:"Leaving Faith Community",description:"After 30 years in a conservative religious community, I'm questioning core doctrines and considering leaving. This would mean losing my entire social network and possibly estrangement from family. However, staying feels intellectually dishonest and emotionally suffocating.",tags:["faith","community","authenticity"]},{title:"Interfaith Marriage",description:"I'm in love with someone from a different religious tradition. Both families expect us to convert to their faith. We're considering creating our own spiritual practice that honors both traditions, but this may alienate both families.",tags:["marriage","tradition","family"]},{title:"Religious Practice vs Career",description:"My career requires working on my faith's holy day. The job is a once-in-a-lifetime opportunity that could support my family for years. My religious community views working on this day as a serious violation of sacred obligations.",tags:["work","observance","obligation"]}],education:[{title:"Academic Dishonesty Dilemma",description:"I discovered that several students in my class are using AI to write their essays. I'm struggling to keep up while doing my own work. Reporting them might make me a social outcast, but not reporting feels unfair to honest students.",tags:["cheating","fairness","social pressure"]},{title:"Competitive vs Collaborative Learning",description:"Our school is switching from a competitive grading system (curve-based) to a collaborative learning model where students are evaluated on group projects and peer teaching. Some high-achieving students are protesting, fearing it will hurt their college admissions.",tags:["grading","competition","cooperation"]}],vocational:[{title:"High-Paying Unethical Work",description:"I've been offered a $300,000/year position at a company whose primary client is developing weapons systems. The money would eliminate my family's debt and secure our future, but the work conflicts with my values around peace and non-violence.",tags:["money","values","weapons"]},{title:"Work-Life Balance Crisis",description:"My employer expects 60-80 hour work weeks. I'm missing my children's milestones and my marriage is suffering. However, I'm the sole income earner, and stepping back could mean losing the promotion I've worked toward for five years.",tags:["family","career","time"]},{title:"Whistleblowing Decision",description:"I've discovered my company is falsifying safety reports to avoid recalls. Reporting this could save lives but will certainly cost me my job and make me unemployable in my industry. I have a family depending on my income.",tags:["safety","employment","public good"]}],environmental:[{title:"Wilderness vs Economic Development",description:"Our town has an opportunity to approve a lithium mining operation that would create 500 jobs and fund schools for a decade. However, it would destroy 50,000 acres of pristine wilderness and threaten several endangered species. The region has high unemployment.",tags:["jobs","conservation","community"]},{title:"Personal Carbon Footprint",description:"My dream job requires flying internationally twice a month. I'm deeply concerned about climate change and have been a climate activist. Taking this job would increase my carbon footprint tenfold, but I could use the platform to advocate for environmental policies.",tags:["climate","hypocrisy","advocacy"]}],interpersonal:[{title:"Truth vs Kindness",description:`My best friend is about to marry someone I believe is manipulative and emotionally abusive. I've seen red flags that my friend dismisses as "misunderstandings." Should I speak up and risk ending our friendship, or stay silent and potentially watch them suffer?`,tags:["friendship","honesty","protection"]},{title:"Family Duty vs Independence",description:"My parents expect me to live with them and care for them as they age, as is traditional in our culture. However, I've received a fellowship opportunity across the country that could define my career. Declining feels like abandoning family duty; accepting feels selfish.",tags:["family","culture","career"]}],intellectual:[{title:"Controversial Research Publication",description:"I have data suggesting a controversial conclusion that contradicts mainstream scientific consensus and could be misused by political groups. Publishing could advance knowledge but might cause social harm. Not publishing violates scientific integrity.",tags:["research","politics","integrity"]},{title:"Authorship Dispute",description:"My advisor is listed as first author on a paper despite me doing 90% of the work. This is standard in my field but feels unjust. Challenging this could damage my career prospects and violate academic hierarchy norms.",tags:["credit","power","norms"]}],general:[{title:"Found Wallet Dilemma",description:"I found a wallet with $500 cash and no ID. There's a gym membership card but the gym is closed for renovation. I could really use the money for rent, but it clearly belongs to someone who might also need it.",tags:["honesty","need","property"]},{title:"White Lie to Protect Feelings",description:"My partner asks if I like their new haircut, which I honestly find unflattering. Telling the truth might hurt their feelings and they can't change it now. Should I be honest or tell a kind lie?",tags:["honesty","kindness","relationships"]}]};let c=xe("healthcare"),b=xe(null);function f(D){B(b,D)}function d(){e(b)&&(j("select",{description:e(b).description,domain:e(c)}),k())}function k(){s(!1),B(b,null)}Ie(()=>{},()=>{B(n,Object.values(T).flat())}),Ie(()=>e(c),()=>{B(l,T[e(c)]||[])}),Xe(),He();var v=rt(),I=Qe(v);{var x=D=>{var X=Wa(),z=a(X),V=a(z),R=i(a(V),2);t(V);var H=i(V,2),q=a(H),ue=a(q);let me;var A=i(ue,2);let P;var E=i(A,2);let ee;var W=i(E,2);let u;var g=i(W,2);let w;var le=i(g,2);let de;var U=i(le,2);let se;var Y=i(U,2);let ge;t(q);var re=i(q,2);Ae(re,5,()=>e(l),De,(fe,p)=>{var m=Sa();let S;var ie=a(m),Z=a(ie,!0);t(ie);var F=i(ie,2),te=a(F);t(F);var C=i(F,2);Ae(C,5,()=>(e(p),r(()=>e(p).tags)),De,(ce,ne)=>{var oe=Pa(),pe=a(oe,!0);t(oe),O(()=>_(pe,e(ne))),y(ce,oe)}),t(C),t(m),O(ce=>{S=Se(m,1,"template-card svelte-j3ixxh",null,S,{selected:e(b)===e(p)}),_(Z,(e(p),r(()=>e(p).title))),_(te,`${ce??""}...`)},[()=>(e(p),r(()=>e(p).description.slice(0,150)))]),ye("click",m,()=>f(e(p))),y(fe,m)}),t(re);var he=i(re,2);{var Q=fe=>{var p=Ra(),m=a(p),S=a(m,!0);t(m);var ie=i(m,2),Z=a(ie,!0);t(ie);var F=i(ie,2);Ae(F,5,()=>(e(b),r(()=>e(b).tags)),De,(te,C)=>{var ce=Ea(),ne=a(ce,!0);t(ce),O(()=>_(ne,e(C))),y(te,ce)}),t(F),t(p),O(()=>{_(S,(e(b),r(()=>e(b).title))),_(Z,(e(b),r(()=>e(b).description)))}),y(fe,p)};K(he,fe=>{e(b)&&fe(Q)})}t(H);var L=i(H,2),ke=a(L),be=i(ke,2);t(L),t(z),t(X),O(()=>{me=Se(ue,1,"tab svelte-j3ixxh",null,me,{active:e(c)==="healthcare"}),P=Se(A,1,"tab svelte-j3ixxh",null,P,{active:e(c)==="spiritual"}),ee=Se(E,1,"tab svelte-j3ixxh",null,ee,{active:e(c)==="education"}),u=Se(W,1,"tab svelte-j3ixxh",null,u,{active:e(c)==="vocational"}),w=Se(g,1,"tab svelte-j3ixxh",null,w,{active:e(c)==="environmental"}),de=Se(le,1,"tab svelte-j3ixxh",null,de,{active:e(c)==="interpersonal"}),se=Se(U,1,"tab svelte-j3ixxh",null,se,{active:e(c)==="intellectual"}),ge=Se(Y,1,"tab svelte-j3ixxh",null,ge,{active:e(c)==="general"}),be.disabled=!e(b)}),ye("click",R,k),ye("click",ue,()=>B(c,"healthcare")),ye("click",A,()=>B(c,"spiritual")),ye("click",E,()=>B(c,"education")),ye("click",W,()=>B(c,"vocational")),ye("click",g,()=>B(c,"environmental")),ye("click",le,()=>B(c,"interpersonal")),ye("click",U,()=>B(c,"intellectual")),ye("click",Y,()=>B(c,"general")),ye("click",ke,k),ye("click",be,d),ye("click",z,Ft(function(fe){Jt.call(this,o,fe)})),ye("click",X,k),y(D,X)};K(I,D=>{s()&&D(x)})}y(h,v),Ne()}var Va=$('<span class="domain-tag svelte-okxp3o"> </span>'),La=$('<div class="evidence svelte-okxp3o"><span class="evidence-label svelte-okxp3o">Evidence:</span> <span class="evidence-text svelte-okxp3o"> </span></div>'),qa=$('<div class="value-card svelte-okxp3o"><div class="value-header svelte-okxp3o"><span class="value-name svelte-okxp3o"> </span> <span class="polarity-badge svelte-okxp3o"> </span></div> <div class="value-meta svelte-okxp3o"><span class="salience"> </span> <!></div> <!></div>'),Fa=$('<div class="values-grid svelte-okxp3o"></div>'),Ja=$('<p style="color: var(--color-text-muted); font-style: italic;">No values detected above confidence threshold</p>'),Ha=$('<div class="conflict-item svelte-okxp3o"><span class="conflict-values svelte-okxp3o"> </span> <span class="conflict-severity svelte-okxp3o"> </span></div>'),Ua=$('<div class="semantic-section conflict-section svelte-okxp3o"><h4 class="svelte-okxp3o"> <span style="font-size: var(--font-size-sm); font-weight: normal; color: var(--color-text-muted);"> </span></h4> <div class="conflicts-list svelte-okxp3o"></div></div>'),Na=$('<div class="context-item svelte-okxp3o"><span class="context-label svelte-okxp3o"> </span> <div class="context-bar-container svelte-okxp3o"><div class="context-bar svelte-okxp3o"></div> <span class="context-value svelte-okxp3o"> </span></div></div>'),Ba=$(`<div class="semantic-section expanded-section svelte-okxp3o"><h4 class="svelte-okxp3o">Context Intensity Analysis</h4> <p style="font-size: var(--font-size-sm); color: var(--color-text-muted); margin-bottom: var(--spacing-sm);">Top contextual dimensions detected (12-dimensional analysis)</p> <div class="context-bars svelte-okxp3o"></div> <div style="margin-top: var(--spacing-md); padding: var(--spacing-sm); background: var(--color-surface); border-radius: var(--radius-sm);"><p style="font-size: var(--font-size-sm); color: var(--color-text-muted); margin: 0;"><strong>Domain Mapping:</strong> TagTeam detected <strong> </strong> domain,
						mapped to IEE's <strong> </strong> domain</p></div></div>`),Ga=$('<div class="card semantic-analysis-card svelte-okxp3o"><div class="card-header svelte-okxp3o"><div style="display: flex; align-items: center; gap: var(--spacing-sm);"><span style="font-size: 1.5rem;">üß†</span> <div><h3 style="margin: 0;" class="svelte-okxp3o">Semantic Analysis</h3> <p style="margin: 0; font-size: var(--font-size-sm); color: var(--color-text-muted);"> </p></div></div> <button type="button" class="button button-secondary" style="font-size: var(--font-size-sm);"> </button></div> <div class="semantic-section svelte-okxp3o"><h4 class="svelte-okxp3o">Semantic Structure</h4> <div class="semantic-roles svelte-okxp3o"><div class="role-item svelte-okxp3o"><span class="role-label svelte-okxp3o">Agent:</span> <span class="role-value svelte-okxp3o"> </span></div> <div class="role-item svelte-okxp3o"><span class="role-label svelte-okxp3o">Action:</span> <span class="role-value svelte-okxp3o"> </span></div> <div class="role-item svelte-okxp3o"><span class="role-label svelte-okxp3o">Patient:</span> <span class="role-value svelte-okxp3o"> </span></div> <div class="role-item svelte-okxp3o"><span class="role-label svelte-okxp3o">Frame:</span> <span class="role-value svelte-okxp3o"> </span></div></div></div> <div class="semantic-section svelte-okxp3o"><h4 class="svelte-okxp3o"> <span class="domain-badge svelte-okxp3o"> </span></h4> <!></div> <!> <!></div>'),Xa=$('<div class="card" style="background: var(--color-surface); border: 1px dashed var(--color-border); padding: var(--spacing-md);"><p style="color: var(--color-text-muted); font-size: var(--font-size-sm); margin: 0; text-align: center;">‚ÑπÔ∏è Semantic analysis not available (TagTeam not loaded or disabled)</p></div>');function Ya(h,o){Ue(o,!1);let n=G(o,"semanticAnalysis",8,null),l=xe(!1);const j={Care:"#e3f2fd",Dignity:"#f3e5f5",Virtue:"#fff3e0",Community:"#e8f5e9",Transcendence:"#fce4ec"},s={1:"Upheld",0:"Neutral","-1":"Violated"},T={1:"var(--color-success)",0:"var(--color-text-muted)","-1":"var(--color-error)"};function c(x){return(x*100).toFixed(0)+"%"}function b(x,D=5){return x?Object.entries(x).sort((X,z)=>z[1]-X[1]).slice(0,D).map(([X,z])=>({dimension:X.replace(/_/g," ").replace(/\b\w/g,V=>V.toUpperCase()),intensity:z})):[]}function f(x){return x?typeof x=="string"?x:typeof x=="object"?x.text||x.lemma||x.word||JSON.stringify(x):String(x):"Unknown"}He();var d=rt(),k=Qe(d);{var v=x=>{var D=Ga(),X=a(D),z=a(X),V=i(a(z),2),R=i(a(V),2),H=a(R);t(R),t(V),t(z);var q=i(z,2),ue=a(q,!0);t(q),t(X);var me=i(X,2),A=i(a(me),2),P=a(A),E=i(a(P),2),ee=a(E,!0);t(E),t(P);var W=i(P,2),u=i(a(W),2),g=a(u,!0);t(u),t(W);var w=i(W,2),le=i(a(w),2),de=a(le,!0);t(le),t(w);var U=i(w,2),se=i(a(U),2),Y=a(se,!0);t(se),t(U),t(A),t(me);var ge=i(me,2),re=a(ge),he=a(re),Q=i(he),L=a(Q);t(Q),t(re);var ke=i(re,2);{var be=Z=>{var F=Fa();Ae(F,5,()=>(M(n()),r(()=>n().detectedValues)),De,(te,C)=>{var ce=qa(),ne=a(ce),oe=a(ne),pe=a(oe,!0);t(oe);var _e=i(oe,2),N=a(_e,!0);t(_e),t(ne);var J=i(ne,2),ve=a(J),ae=a(ve);t(ve);var we=i(ve,2);{var Pe=je=>{var Ce=Va(),Re=a(Ce,!0);t(Ce),O(()=>_(Re,(e(C),r(()=>e(C).domain)))),y(je,Ce)};K(we,je=>{e(C),r(()=>e(C).domain)&&je(Pe)})}t(J);var qe=i(J,2);{var Ee=je=>{var Ce=La(),Re=i(a(Ce),2),$e=a(Re);t(Re),t(Ce),O(tt=>_($e,`"${tt??""}"`),[()=>(e(C),r(()=>e(C).evidence.join('", "')))]),y(je,Ce)};K(qe,je=>{e(C),r(()=>e(C).evidence&&e(C).evidence.length>0)&&je(Ee)})}t(ce),O(je=>{_(pe,(e(C),r(()=>e(C).name))),Me(_e,`color: ${e(C),r(()=>T[e(C).polarity]||"var(--color-text-muted)")??""};`),_(N,(e(C),r(()=>s[e(C).polarity]||"Unknown"))),_(ae,`Salience: ${je??""}`)},[()=>(e(C),r(()=>c(e(C).salience)))]),y(te,ce)}),t(F),y(Z,F)},fe=Z=>{var F=Ja();y(Z,F)};K(ke,Z=>{M(n()),r(()=>n().detectedValues&&n().detectedValues.length>0)?Z(be):Z(fe,!1)})}t(ge);var p=i(ge,2);{var m=Z=>{var F=Ua(),te=a(F),C=a(te),ce=i(C),ne=a(ce);t(ce),t(te);var oe=i(te,2);Ae(oe,5,()=>(M(n()),r(()=>n().valueConflicts)),De,(pe,_e)=>{var N=Ha(),J=a(N),ve=a(J,!0);t(J);var ae=i(J,2),we=a(ae,!0);t(ae),t(N),O(Pe=>{_(ve,Pe),_(we,(e(_e),r(()=>e(_e).severity||"moderate")))},[()=>(e(_e),r(()=>e(_e).values?.join(" ‚Üî ")||"Unknown"))]),y(pe,N)}),t(oe),t(F),O(pe=>{_(C,`Value Conflicts Detected (${M(n()),r(()=>n().valueConflicts.length)??""}) `),_(ne,`Conflict Score: ${pe??""}%`)},[()=>(M(n()),r(()=>(n().conflictScore*100).toFixed(0)))]),y(Z,F)};K(p,Z=>{M(n()),r(()=>n().valueConflicts&&n().valueConflicts.length>0)&&Z(m)})}var S=i(p,2);{var ie=Z=>{var F=Ba(),te=i(a(F),4);Ae(te,5,()=>(M(n()),r(()=>b(n().contextIntensity))),De,(N,J)=>{let ve=()=>e(J).dimension,ae=()=>e(J).intensity;var we=Na(),Pe=a(we),qe=a(Pe,!0);t(Pe);var Ee=i(Pe,2),je=a(Ee),Ce=i(je,2),Re=a(Ce,!0);t(Ce),t(Ee),t(we),O($e=>{_(qe,ve()),Me(je,`width: ${ae()*100}%;`),_(Re,$e)},[()=>(ae(),r(()=>c(ae())))]),y(N,we)}),t(te);var C=i(te,2),ce=a(C),ne=i(a(ce),2),oe=a(ne,!0);t(ne);var pe=i(ne,2),_e=a(pe,!0);t(pe),Oe(),t(ce),t(C),t(F),O(()=>{_(oe,(M(n()),r(()=>n().dominantDomain))),_(_e,(M(n()),r(()=>n().suggestedIEEDomain||"general")))}),y(Z,F)};K(S,Z=>{e(l)&&Z(ie)})}t(D),O((Z,F,te,C)=>{_(H,`Powered by TagTeam v${M(n()),r(()=>n().version)??""} ¬∑ Confidence: ${Z??""}`),_(ue,e(l)?"Collapse":"Expand Details"),_(ee,F),_(g,te),_(de,C),_(Y,(M(n()),r(()=>n().semanticFrame||"Unknown"))),_(he,`Detected Values (${M(n()),r(()=>n().detectedValues?.length||0)??""}) `),Me(Q,`background: ${M(n()),r(()=>j[n().dominantDomain]||"#f5f5f5")??""};`),_(L,`${M(n()),r(()=>n().dominantDomain||"Unknown")??""} Domain`)},[()=>(M(n()),r(()=>c(n().confidence))),()=>(M(n()),r(()=>f(n().agent))),()=>(M(n()),r(()=>f(n().action))),()=>(M(n()),r(()=>f(n().patient)))]),ye("click",q,()=>B(l,!e(l))),y(x,D)},I=x=>{var D=Xa();y(x,D)};K(k,x=>{n()?x(v):x(I,!1)})}y(h,d),Ne()}var Qa=$('<button type="button" class="button button-secondary">New Deliberation</button>'),Za=$('<div class="flex gap-md"><button type="submit" class="button"><!></button> <!></div>'),Ka=$('<div style="margin-top: var(--spacing-md); padding: var(--spacing-md); background: #fee; border: 1px solid var(--color-error); border-radius: var(--radius-md); color: var(--color-error);"> </div>'),es=$('<section class="card" style="text-align: center; padding: var(--spacing-2xl);"><div style="font-size: var(--font-size-lg); color: var(--color-text-muted);">‚è≥ Deliberating across 12 worldviews...</div> <p style="margin-top: var(--spacing-md); color: var(--color-text-muted);">Gathering perspectives, identifying tensions, and resolving value conflicts.<br/> <span style="font-style: italic; font-size: var(--font-size-sm);">This deliberative pacing is intentional‚Äîgravity befits the subject matter.</span></p></section>'),ts=$("<section><!></section>"),as=$("<section><!></section>"),ss=$('<div class="flex-col gap-md"></div>'),is=$('<div style="margin-bottom: var(--spacing-lg);"><h3 style="font-size: var(--font-size-lg); margin-bottom: var(--spacing-sm);" class="svelte-1r9skv0">Dissenting Perspectives <span style="font-size: var(--font-size-sm); font-weight: normal; color: var(--color-text-muted);">(Highlighted per MDI v2.0 Delta Principle)</span></h3> <div class="flex-col gap-md"></div></div>'),ns=$('<!> <div style="text-align: center; padding: var(--spacing-md); background: var(--color-surface); border-radius: var(--radius-md);"><p style="color: var(--color-text-muted); font-size: var(--font-size-sm);"> </p></div>',1),rs=$(`<div id="results" class="flex-col gap-lg"><section><!></section> <!> <!> <section class="card"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-md);"><h2 style="margin: 0;" class="svelte-1r9skv0">Individual Worldview Evaluations</h2> <button type="button" class="button button-secondary" style="font-size: var(--font-size-sm);"> </button></div> <p style="color: var(--color-text-muted); font-size: var(--font-size-sm); margin-bottom: var(--spacing-lg);">Each worldview provides a unique lens through which to examine the scenario.
						Differences illuminate the structural geometry of the moral problem.</p> <!></section> <section class="card" style="background: var(--color-surface); border: 1px solid var(--color-border);"><div style="color: var(--color-text-muted); font-size: var(--font-size-sm);"><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);"><div><strong style="color: var(--color-text);">Deliberation ID:</strong><br/> <code style="font-size: var(--font-size-xs);" class="svelte-1r9skv0"> </code></div> <div><strong style="color: var(--color-text);">Completed:</strong><br/> </div> <div><strong style="color: var(--color-text);">Domain:</strong><br/> </div> <div><strong style="color: var(--color-text);">Conflicts Identified:</strong><br/> </div></div></div></section></div>`),os=$(`<div class="container" style="padding: var(--spacing-2xl) 0;"><header style="margin-bottom: var(--spacing-2xl);"><div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: var(--spacing-md);"><div><h1>Ethical Deliberation</h1> <p style="color: var(--color-text-muted); max-width: 800px;">Describe an ethical scenario to receive multi-perspectival analysis from 12 worldviews.
					The interface illuminates complexity rather than simplifying it.</p></div> <button class="button button-secondary" style="white-space: nowrap;">Browse Templates</button></div></header> <main class="flex-col gap-lg"><section><!> <!></section> <!> <!></main> <!></div>`);function ws(h,o){Ue(o,!1);const n=()=>At(at,"$deliberation",l),[l,j]=It(),s=xe(),T=xe(),c=xe(),b=xe();let f=xe({description:"",domain:"",context:{}}),d=xe(!1),k=xe(null),v=xe(!1),I=xe(!1);async function x(){B(k,null);try{B(d,!0);const w=await at.deliberate(e(f));await Pt.saveDeliberation(w),setTimeout(()=>{document.getElementById("results")?.scrollIntoView({behavior:"smooth"})},100)}catch(w){B(k,w.message)}finally{B(d,!1)}}function D(){B(f,{description:"",domain:"",context:{}}),at.reset(),B(k,null),B(v,!1)}function X(w){B(f,{description:w.detail.description,domain:w.detail.domain,context:{}}),B(I,!1)}Ie(()=>n(),()=>{B(s,n().currentDeliberation)}),Ie(()=>e(s),()=>{B(T,e(s)?.metadata?.conflicts||[])}),Ie(()=>e(s),()=>{B(c,e(s)?.worldviews?.map(w=>({worldview:w.worldview,judgment:w.judgment,confidence:w.confidence,weight:w.weight}))||[])}),Ie(()=>e(T),()=>{B(b,e(T).map(w=>({worldviews:w.worldviews||w.perspectives||[],severity:w.severity||"moderate"})))}),Xe(),He();var z=os(),V=a(z),R=a(V),H=i(a(R),2);t(R),t(V);var q=i(V,2),ue=a(q),me=a(ue);Zt(me,{onSubmit:x,get disabled(){return e(d)},get scenario(){return e(f)},set scenario(w){B(f,w)},children:(w,le)=>{var de=Za(),U=a(de),se=a(U);{var Y=Q=>{var L=Ge("Deliberating...");y(Q,L)},ge=Q=>{var L=Ge("Begin Deliberation");y(Q,L)};K(se,Q=>{e(d)?Q(Y):Q(ge,!1)})}t(U);var re=i(U,2);{var he=Q=>{var L=Qa();ye("click",L,D),y(Q,L)};K(re,Q=>{e(s)&&Q(he)})}t(de),O(()=>U.disabled=e(d)),y(w,de)},$$slots:{default:!0},$$legacy:!0});var A=i(me,2);{var P=w=>{var le=Ka(),de=a(le);t(le),O(()=>_(de,`‚ö†Ô∏è ${e(k)??""}`)),y(w,le)};K(A,w=>{e(k)&&w(P)})}t(ue);var E=i(ue,2);{var ee=w=>{var le=es();y(w,le)};K(E,w=>{e(d)&&w(ee)})}var W=i(E,2);{var u=w=>{var le=rs(),de=a(le),U=a(de);{let N=Ve(()=>(e(s),r(()=>e(s).supportingWorldviews||[]))),J=Ve(()=>(e(s),r(()=>e(s).minorityViews||[]))),ve=Ve(()=>(e(s),r(()=>e(s).metadata?.evaluationsCount||e(s).worldviews?.length||0))),ae=Ve(()=>(e(s),e(T),r(()=>e(s).metadata?.conflictsCount||e(T).length))),we=Ve(()=>(e(s),r(()=>e(s).isContested||!1)));Da(U,{get judgment(){return e(s),r(()=>e(s).judgment)},get confidence(){return e(s),r(()=>e(s).confidence)},get confidenceLevel(){return e(s),r(()=>e(s).confidenceLevel)},get justification(){return e(s),r(()=>e(s).justification)},get domain(){return e(s),r(()=>e(s).domain)},get supportingWorldviews(){return e(N)},get minorityViews(){return e(J)},get worldviewsConsulted(){return e(ve)},get conflictsDetected(){return e(ae)},get isContested(){return e(we)},get margin(){return e(s),r(()=>e(s).margin)},get marginPercent(){return e(s),r(()=>e(s).marginPercent)},get secondPlace(){return e(s),r(()=>e(s).secondPlace)},get secondPlaceScore(){return e(s),r(()=>e(s).secondPlaceScore)},get agreement(){return e(s),r(()=>e(s).agreement)},get quorum(){return e(s),r(()=>e(s).quorum)}})}t(de);var se=i(de,2);{var Y=N=>{var J=ts(),ve=a(J);Ya(ve,{get semanticAnalysis(){return e(s),r(()=>e(s).semanticAnalysis)}}),t(J),y(N,J)};K(se,N=>{e(s),r(()=>e(s).semanticAnalysis)&&N(Y)})}var ge=i(se,2);{var re=N=>{var J=as(),ve=a(J);{let ae=Ve(()=>(e(s),r(()=>e(s).isContested||!1)));ba(ve,{get worldviews(){return e(c)},get conflicts(){return e(b)},width:700,height:700,get isContested(){return e(ae)},get winningJudgment(){return e(s),r(()=>e(s).judgment)},get secondPlace(){return e(s),r(()=>e(s).secondPlace)},get margin(){return e(s),r(()=>e(s).margin)},get marginPercent(){return e(s),r(()=>e(s).marginPercent)}})}t(J),y(N,J)};K(ge,N=>{e(c),r(()=>e(c).length>0)&&N(re)})}var he=i(ge,2),Q=a(he),L=i(a(Q),2),ke=a(L,!0);t(L),t(Q);var be=i(Q,4);{var fe=N=>{var J=ss();Ae(J,5,()=>(e(s),r(()=>e(s).worldviews)),De,(ve,ae)=>{{let we=Ve(()=>(e(ae),r(()=>e(ae).values||[])));mt(ve,{get worldview(){return e(ae),r(()=>e(ae).worldview)},get judgment(){return e(ae),r(()=>e(ae).judgment)},get confidence(){return e(ae),r(()=>e(ae).confidence)},get weight(){return e(ae),r(()=>e(ae).weight)},get reasoning(){return e(ae),r(()=>e(ae).reasoning)},get values(){return e(we)},isExpanded:!1})}}),t(J),y(N,J)},p=N=>{var J=ns(),ve=Qe(J);{var ae=Ee=>{var je=is(),Ce=i(a(je),2);Ae(Ce,5,()=>(e(s),r(()=>e(s).worldviews.filter(Re=>e(s).minorityViews?.some($e=>$e.worldview===Re.worldview)))),De,(Re,$e)=>{{let tt=Ve(()=>(e($e),r(()=>e($e).values||[])));mt(Re,{get worldview(){return e($e),r(()=>e($e).worldview)},get judgment(){return e($e),r(()=>e($e).judgment)},get confidence(){return e($e),r(()=>e($e).confidence)},get weight(){return e($e),r(()=>e($e).weight)},get reasoning(){return e($e),r(()=>e($e).reasoning)},get values(){return e(tt)},isExpanded:!0})}}),t(Ce),t(je),y(Ee,je)};K(ve,Ee=>{e(s),r(()=>e(s).minorityViews&&e(s).minorityViews.length>0)&&Ee(ae)})}var we=i(ve,2),Pe=a(we),qe=a(Pe);t(Pe),t(we),O(()=>_(qe,`Click "View All ${e(s),r(()=>e(s).worldviews.length)??""} Worldviews" above to see the complete multi-perspectival analysis`)),y(N,J)};K(be,N=>{e(v)?N(fe):N(p,!1)})}t(he);var m=i(he,2),S=a(m),ie=a(S),Z=a(ie),F=i(a(Z),3),te=a(F,!0);t(F),t(Z);var C=i(Z,2),ce=i(a(C),2);t(C);var ne=i(C,2),oe=i(a(ne),2);t(ne);var pe=i(ne,2),_e=i(a(pe),2);t(pe),t(ie),t(S),t(m),t(le),O(N=>{_(ke,(e(v),e(s),r(()=>e(v)?"Collapse All":`View All ${e(s).worldviews.length} Worldviews`))),_(te,(e(s),r(()=>e(s).id))),_(ce,` ${N??""}`),_(oe,` ${e(s),r(()=>e(s).domain)??""}`),_(_e,` ${e(s),r(()=>e(s).metadata?.conflictsCount||0)??""}`)},[()=>(e(s),r(()=>new Date(e(s).timestamp).toLocaleString()))]),ye("click",L,()=>B(v,!e(v))),y(w,le)};K(W,w=>{e(s)&&!e(d)&&w(u)})}t(q);var g=i(q,2);Oa(g,{get show(){return e(I)},set show(w){B(I,w)},$$events:{select:X},$$legacy:!0}),t(z),ye("click",H,()=>B(I,!0)),y(h,z),Ne(),j()}export{ws as component};
